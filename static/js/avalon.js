(function(c,b){if(typeof module==="object"&&typeof module.exports==="object"){module.exports=c.document?b(c,true):function(d){if(!d.document){throw new Error("Avalon requires a window with a document")}return b(d)}}else{b(c)}}(typeof window!=="undefined"?window:this,function(cm,bc){var aM=new Date()-0;var cY=cm.document;var b=cY.getElementsByTagName("head")[0];var aI=b.insertBefore(document.createElement("avalon"),b.firstChild);aI.innerHTML="X<style id='avalonStyle'>.avalonHide{ display: none!important }</style>";aI.setAttribute("ms-skip","1");aI.className="avalonHide";var ar=/\[native code\]/;function cM(){if(cm.console&&avalon.config.debug){Function.apply.call(console.log,console,arguments)}}var c8="$"+aM;var w={};var b9=/[^, ]+/g;var f=/\w+/g;var aB=/^\[object SVG\w*Element\]$/;var J=/^\[object (?:Window|DOMWindow|global)\]$/;var bL=Object.prototype;var cs=bL.hasOwnProperty;var c1=bL.toString;var dg=Array.prototype;var Z=dg.slice;var aX=cm.dispatchEvent;var dt=cY.documentElement;var cy=cY.createDocumentFragment();var dH=cY.createElement("div");var aL={};"Boolean Number String Function Array Date RegExp Object Error".replace(b9,function(e){aL["[object "+e+"]"]=e.toLowerCase()});function bw(e){return Function.apply(l,e)}function l(){}function dL(dX,dV){if(typeof dX==="string"){dX=dX.match(b9)||[]}var e={},dU=dV!==void 0?dV:1;for(var ap=0,dW=dX.length;ap<dW;ap++){e[dX[ap]]=dU}return e}var bW=function(e){e=e||"avalon";return String(Math.random()+Math.random()).replace(/\d\.\d{4}/,e)};function dw(){if(cm.VBArray){var e=document.documentMode;return e?e:cm.XMLHttpRequest?7:6}else{return NaN}}var ch=dw();avalon=function(e){return new avalon.init(e)};avalon.nextTick=new function(){var dV=cm.setImmediate;var dU=cm.MutationObserver;if(dV){return dV.bind(cm)}var e=[];function dX(){var dZ=e.length;for(var dY=0;dY<dZ;dY++){e[dY]()}e=e.slice(dZ)}if(dU){var dW=document.createTextNode("avalon");new dU(dX).observe(dW,{characterData:true});var ap=false;return function(dY){e.push(dY);ap=!ap;dW.data=ap}}return function(dY){setTimeout(dY,4)}};avalon.init=function(e){this[0]=this.element=e};avalon.fn=avalon.prototype=avalon.init.prototype;avalon.type=function(e){if(e==null){return String(e)}return typeof e==="object"||typeof e==="function"?aL[c1.call(e)]||"object":typeof e};var H=typeof alert==="object"?function(ap){try{return/^\s*\bfunction\b/.test(ap+"")}catch(dU){return false}}:function(e){return c1.call(e)==="[object Function]"};avalon.isFunction=H;avalon.isWindow=function(e){if(!e){return false}return e==e.document&&e.document!=e};function bo(e){return J.test(c1.call(e))}if(bo(cm)){avalon.isWindow=bo}var aN;for(aN in avalon({})){break}var dQ=aN!=="0";avalon.isPlainObject=function(dV,ap){if(!dV||avalon.type(dV)!=="object"||dV.nodeType||avalon.isWindow(dV)){return false}try{if(dV.constructor&&!cs.call(dV,"constructor")&&!cs.call(dV.constructor.prototype,"isPrototypeOf")){return false}}catch(dU){return false}if(dQ){for(ap in dV){return cs.call(dV,ap)}}for(ap in dV){}return ap===void 0||cs.call(dV,ap)};if(ar.test(Object.getPrototypeOf)){avalon.isPlainObject=function(e){return c1.call(e)==="[object Object]"&&Object.getPrototypeOf(e)===bL}}avalon.mix=avalon.fn.mix=function(){var d3,dV,ap,dU,d0,d1,dZ=arguments[0]||{},dX=1,dW=arguments.length,d2=false;if(typeof dZ==="boolean"){d2=dZ;dZ=arguments[1]||{};dX++}if(typeof dZ!=="object"&&!H(dZ)){dZ={}}if(dX===dW){dZ=this;dX--}for(;dX<dW;dX++){if((d3=arguments[dX])!=null){for(dV in d3){ap=dZ[dV];try{dU=d3[dV]}catch(dY){continue}if(dZ===dU){continue}if(d2&&dU&&(avalon.isPlainObject(dU)||(d0=Array.isArray(dU)))){if(d0){d0=false;d1=ap&&Array.isArray(ap)?ap:[]}else{d1=ap&&avalon.isPlainObject(ap)?ap:{}}dZ[dV]=avalon.mix(d2,d1,dU)}else{if(dU!==void 0){dZ[dV]=dU}}}}}return dZ};function br(ap,e){ap=Math.floor(ap)||0;return ap<0?Math.max(e+ap,0):Math.min(ap,e)}avalon.mix({rword:b9,subscribers:c8,version:1.55,ui:{},log:cM,slice:aX?function(ap,dU,e){return Z.call(ap,dU,e)}:function(dU,dX,ap){var dV=[];var e=dU.length;if(ap===void 0){ap=e}if(typeof ap==="number"&&isFinite(ap)){dX=br(dX,e);ap=br(ap,e);for(var dW=dX;dW<ap;++dW){dV[dW-dX]=dU[dW]}}return dV},noop:l,error:function(dU,ap){throw (ap||Error)(dU)},oneObject:dL,range:function(dX,ap,dW){dW||(dW=1);if(ap==null){ap=dX||0;dX=0}var dU=-1,dV=Math.max(0,Math.ceil((ap-dX)/dW)),e=new Array(dV);while(++dU<dV){e[dU]=dX;dX+=dW}return e},eventHooks:{},bind:function(dW,dV,dU,ap){var e=avalon.eventHooks;var dX=e[dV];if(typeof dX==="object"){dV=dX.type||dV;ap=dX.phase||!!ap;dU=dX.fn?dX.fn(dW,dU):dU}var dY=aX?dU:function(dZ){dU.call(dW,cI(dZ))};if(aX){dW.addEventListener(dV,dY,ap)}else{dW.attachEvent("on"+dV,dY)}return dY},unbind:function(dW,dV,dU,ap){var e=avalon.eventHooks;var dX=e[dV];var dY=dU||l;if(typeof dX==="object"){dV=dX.type||dV;ap=dX.phase||!!ap}if(aX){dW.removeEventListener(dV,dY,ap)}else{dW.detachEvent("on"+dV,dY)}},css:function(dU,e,dV){if(dU instanceof avalon){dU=dU[0]}var dX=/[_-]/.test(e)?m(e):e,ap;e=avalon.cssName(dX)||dX;if(dV===void 0||typeof dV==="boolean"){ap=z[dX+":get"]||z["@:get"];
if(e==="background"){e="backgroundColor"}var dW=ap(dU,e);return dV===true?parseFloat(dW)||0:dW}else{if(dV===""){dU.style[e]=""}else{if(dV==null||dV!==dV){return}if(isFinite(dV)&&!avalon.cssNumber[dX]){dV+="px"}ap=z[dX+":set"]||z["@:set"];ap(dU,e,dV)}}},each:function(dU,ap){if(dU){var e=0;if(a7(dU)){for(var dV=dU.length;e<dV;e++){if(ap(e,dU[e])===false){break}}}else{for(e in dU){if(dU.hasOwnProperty(e)&&ap(e,dU[e])===false){break}}}}},getWidgetData:function(dV,dW){var ap=avalon(dV).data();var e={};for(var dU in ap){if(dU.indexOf(dW)===0){e[dU.replace(dW,"").replace(/\w/,function(dX){return dX.toLowerCase()})]=ap[dU]}}return e},Array:{ensure:function(ap,e){if(ap.indexOf(e)===-1){return ap.push(e)}},removeAt:function(ap,e){return !!ap.splice(e,1).length},remove:function(dU,ap){var e=dU.indexOf(ap);if(~e){return avalon.Array.removeAt(dU,e)}return false}}});var dJ=avalon.bindingHandlers={};var al=avalon.bindingExecutors={};var G=avalon.directives={};avalon.directive=function(e,ap){dJ[e]=ap.init=(ap.init||l);al[e]=ap.update=(ap.update||l);return G[e]=ap};function a7(dV){if(!dV){return false}var dW=dV.length;if(dW===(dW>>>0)){var ap=c1.call(dV).slice(8,-1);if(/(?:regexp|string|function|window|global)$/i.test(ap)){return false}if(ap==="Array"){return true}try{if({}.propertyIsEnumerable.call(dV,"length")===false){return/^\s?function/.test(dV.item||dV.callee)}return true}catch(dU){return !dV.window}}return false}var i=new function(){function e(dU){this.size=0;this.limit=dU;this.head=this.tail=void 0;this._keymap={}}var ap=e.prototype;ap.put=function(dU,dW){var dV={key:dU,value:dW};this._keymap[dU]=dV;if(this.tail){this.tail.newer=dV;dV.older=this.tail}else{this.head=dV}this.tail=dV;if(this.size===this.limit){this.shift()}else{this.size++}return dW};ap.shift=function(){var dU=this.head;if(dU){this.head=this.head.newer;this.head.older=dU.newer=dU.older=this._keymap[dU.key]=void 0;delete this._keymap[dU.key]}};ap.get=function(dU){var dV=this._keymap[dU];if(dV===void 0){return}if(dV===this.tail){return dV.value}if(dV.newer){if(dV===this.head){this.head=dV.newer}dV.newer.older=dV.older}if(dV.older){dV.older.newer=dV.newer}dV.newer=void 0;dV.older=this.tail;if(this.tail){this.tail.newer=dV}this.tail=dV;return dV.value};return e};if(!"司徒正美".trim){var Q=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;String.prototype.trim=function(){return this.replace(Q,"")}}var dS=!({"toString":null}).propertyIsEnumerable("toString"),bB=(function(){}).propertyIsEnumerable("prototype"),D=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],aE=D.length;if(!Object.keys){Object.keys=function(dU){var dW=[];var d0=bB&&typeof dU==="function";if(typeof dU==="string"||(dU&&dU.callee)){for(var dY=0;dY<dU.length;++dY){dW.push(String(dY))}}else{for(var e in dU){if(!(d0&&e==="prototype")&&cs.call(dU,e)){dW.push(String(e))}}}if(dS){var dZ=dU.constructor,ap=dZ&&dZ.prototype===dU;for(var dX=0;dX<aE;dX++){var dV=D[dX];if(!(ap&&dV==="constructor")&&cs.call(dU,dV)){dW.push(dV)}}}return dW}}if(!Array.isArray){Array.isArray=function(e){return c1.call(e)==="[object Array]"}}if(!l.bind){Function.prototype.bind=function(dU){if(arguments.length<2&&dU===void 0){return this}var ap=this,e=arguments;return function(){var dV=[],dW;for(dW=1;dW<e.length;dW++){dV.push(e[dW])}for(dW=0;dW<arguments.length;dW++){dV.push(arguments[dW])}return ap.apply(dU,dV)}}}function bQ(dV,e,dU){var ap="for(var "+dV+"i=0,n = this.length; i < n; i++){"+e.replace("_","((i in this) && fn.call(scope,this[i],i,this))")+"}"+dU;return Function("fn,scope",ap)}if(!ar.test([].map)){avalon.mix(dg,{indexOf:function(dU,e){var dV=this.length,ap=~~e;if(ap<0){ap+=dV}for(;ap<dV;ap++){if(this[ap]===dU){return ap}}return -1},lastIndexOf:function(dU,e){var dV=this.length,ap=e==null?dV-1:e;if(ap<0){ap=Math.max(0,dV+ap)}for(;ap>=0;ap--){if(this[ap]===dU){return ap}}return -1},forEach:bQ("","_",""),filter:bQ("r=[],j=0,","if(_)r[j++]=this[i]","return r"),map:bQ("r=[],","r[i]=_","return r"),some:bQ("","if(_)return true","return false"),every:bQ("","if(!_)return false","return true")})}function u(ap,dU){try{while((dU=dU.parentNode)){if(dU===ap){return true}}return false}catch(dV){return false}}avalon.contains=u;if(!cY.contains){cY.contains=function(e){return u(cY,e)}}function s(){return new XMLSerializer().serializeToString(this)}if(cm.SVGElement){if(!cY.createTextNode("x").contains){Node.prototype.contains=function(e){return !!(this.compareDocumentPosition(e)&16)}}var bs="http://www.w3.org/2000/svg";var b7=cY.createElementNS(bs,"svg");b7.innerHTML='<circle cx="50" cy="50" r="40" fill="red" />';if(!aB.test(b7.firstChild)){function cg(dW,dX){if(dW&&dW.childNodes){var ap=dW.childNodes;for(var dU=0,dV;dV=ap[dU++];){if(dV.tagName){var e=cY.createElementNS(bs,dV.tagName.toLowerCase());dg.forEach.call(dV.attributes,function(dY){e.setAttribute(dY.name,dY.value)});cg(dV,e);dX.appendChild(e)}}}}Object.defineProperties(SVGElement.prototype,{"outerHTML":{enumerable:true,configurable:true,get:s,set:function(ap){var e=this.tagName.toLowerCase(),dU=this.parentNode,dW=avalon.parseHTML(ap);
if(e==="svg"){dU.insertBefore(dW,this)}else{var dV=cY.createDocumentFragment();cg(dW,dV);dU.insertBefore(dV,this)}dU.removeChild(this)}},"innerHTML":{enumerable:true,configurable:true,get:function(){var ap=this.outerHTML;var e=new RegExp("<"+this.nodeName+'\\b(?:(["\'])[^"]*?(\\1)|[^>])*>',"i");var dU=new RegExp("</"+this.nodeName+">$","i");return ap.replace(e,"").replace(dU,"")},set:function(e){if(avalon.clearHTML){avalon.clearHTML(this);var ap=avalon.parseHTML(e);cg(ap,this)}}}})}}if(!dt.outerHTML&&cm.HTMLElement){HTMLElement.prototype.__defineGetter__("outerHTML",s)}var dn=/^(?:mouse|contextmenu|drag)|click/;function cI(dV){var e={};for(var ap in dV){e[ap]=dV[ap]}var dX=e.target=dV.srcElement;if(dV.type.indexOf("key")===0){e.which=dV.charCode!=null?dV.charCode:dV.keyCode}else{if(dn.test(dV.type)){var dW=dX.ownerDocument||cY;var dU=dW.compatMode==="BackCompat"?dW.body:dW.documentElement;e.pageX=dV.clientX+(dU.scrollLeft>>0)-(dU.clientLeft>>0);e.pageY=dV.clientY+(dU.scrollTop>>0)-(dU.clientTop>>0);e.wheelDeltaY=e.wheelDelta;e.wheelDeltaX=0}}e.timeStamp=new Date()-0;e.originalEvent=dV;e.preventDefault=function(){dV.returnValue=false};e.stopPropagation=function(){dV.cancelBubble=true};return e}var bM=avalon.eventHooks;if(!("onmouseenter" in dt)){avalon.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(ap,e){bM[ap]={type:e,fn:function(dV,dU){return function(dX){var dW=dX.relatedTarget;if(!dW||(dW!==dV&&!(dV.compareDocumentPosition(dW)&16))){delete dX.type;dX.type=ap;return dU.call(dV,dX)}}}}})}avalon.each({AnimationEvent:"animationend",WebKitAnimationEvent:"webkitAnimationEnd"},function(e,ap){if(cm[e]&&!bM.animationend){bM.animationend={type:ap}}});if(!("oninput" in cY.createElement("input"))){bM.input={type:"propertychange",deel:function(ap,e){return function(dU){if(dU.propertyName==="value"){dU.type="input";return e.call(ap,dU)}}}}}if(cY.onmousewheel===void 0){var cx=cY.onwheel!==void 0?"wheel":"DOMMouseScroll";var bK=cx==="wheel"?"deltaY":"detail";bM.mousewheel={type:cx,fn:function(ap,e){return function(dU){dU.wheelDeltaY=dU.wheelDelta=dU[bK]>0?-120:120;dU.wheelDeltaX=0;if(Object.defineProperty){Object.defineProperty(dU,"type",{value:"mousewheel"})}e.call(ap,dU)}}}}function aC(e){for(var ap in e){if(!cs.call(e,ap)){continue}var dU=e[ap];if(typeof aC.plugins[ap]==="function"){aC.plugins[ap](dU)}else{if(typeof aC[ap]==="object"){avalon.mix(aC[ap],dU)}else{aC[ap]=dU}}}return this}var c2,bE,am,aQ,bk,ab=/[-.*+?^${}()|[\]\/\\]/g;function cr(e){return(e+"").replace(ab,"\\$&")}var dP={interpolate:function(dV){c2=dV[0];bE=dV[1];if(c2===bE){throw new SyntaxError("openTag!==closeTag");var dU=c2+"test"+bE;dH.innerHTML=dU;if(dH.innerHTML!==dU&&dH.innerHTML.indexOf("&lt;")>-1){throw new SyntaxError("此定界符不合法")}dH.innerHTML=""}aC.openTag=c2;aC.closeTag=bE;var e=cr(c2),ap=cr(bE);am=new RegExp(e+"(.*?)"+ap);aQ=new RegExp(e+"(.*?)"+ap,"g");bk=new RegExp(e+".*?"+ap+"|\\sms-")}};aC.async=true;aC.debug=true;aC.plugins=dP;aC.plugins["interpolate"](["{{","}}"]);aC.paths={};aC.shim={};aC.maxRepeatSize=100;avalon.config=aC;function a3(dW,dX){var dV=this.$events||(this.$events={});var e=dV[dW]||(dV[dW]=[]);if(typeof dX==="function"){var ap=dX;ap.uniqueNumber=Math.random();dX={element:dt,type:"user-watcher",handler:l,vmodels:[this],expr:dW,uniqueNumber:ap.uniqueNumber};dX.wildcard=/\*/.test(dW)}if(!dX.update){if(/\w\.*\B/.test(dW)){dX.getter=l;var dU=this;dX.update=function(){var dY=this.fireArgs||[];if(dY[2]){dX.handler.apply(dU,dY)}delete this.fireArgs};e.sync=true;avalon.Array.ensure(e,dX)}else{avalon.injectBinding(dX)}if(ap){dX.handler=ap}}else{if(!dX.oneTime){avalon.Array.ensure(e,dX)}}return function(){dX.update=dX.getter=dX.handler=l;dX.element=cY.createElement("a")}}function bb(dV,ap){var dX=this.$events;if(dX&&dX[dV]){if(ap){ap[2]=dV}var e=dX[dV];df(e,ap);var dW=this.$up;if(dW){if(this.$pathname){bb.call(dW,this.$pathname+"."+dV,ap)}bb.call(dW,"*."+dV,ap)}}else{dW=this.$up;if(this.$ups){for(var dU in this.$ups){bb.call(this.$ups[dU],dU+"."+dV,ap)}return}if(dW){var dZ=this.$pathname;if(dZ===""){dZ="*"}var dY=dZ+"."+dV;e=dY.split(".");if(e.indexOf("*")===-1){bb.call(dW,dY,ap);e[1]="*";bb.call(dW,e.join("."),ap)}else{bb.call(dW,dY,ap)}}}}function dB(dU,ap){do{if(dU.$watch){var dV=dU.$events||(dU.$events={});var dW=dV[ap]||(dV[ap]=[]);cR.collectDependency(dW);return}dU=dU.$up;if(dU){ap=dU.$pathname+"."+ap}else{break}}while(true)}function df(dU,e){if(!dU){return}if(new Date()-ck>444&&typeof dU[0]==="object"){a8()}var dY=[],dX=[];for(var ap=0,dW;dW=dU[ap++];){if(dW.type==="user-watcher"){dY.push(dW)}else{dX.push(dW)}}if(aC.async){dI.render();for(ap=0;dW=dX[ap++];){if(dW.update){var dV=O(dW);if(!dI.queue[dV]){dI.queue[dV]=1;dI.queue.push(dW)}}}}else{for(ap=0;dW=dX[ap++];){if(dW.update){dW.update()}}}for(ap=0;dW=dY[ap++];){if(e&&e[2]===dW.expr||dW.wildcard){dW.fireArgs=e}dW.update()}}var dq=avalon.vmodels={};avalon.define=function(e){var dU=e.$id;if(!dU){cM("warning: vm必须指定$id")}var ap=cG(e);ap.$id=dU;return dq[dU]=ap};var ci=dL("$id,$watch,$fire,$events,$model,$skipArray,$active,$pathname,$up,$track,$accessors,$ups");
var c3=Object.defineProperty;var bI=true;try{c3({},"_",{value:"x"});var t=Object.defineProperties}catch(cB){bI=false}function cG(ap,e){e=e||{};e.watch=true;return dG(ap,e)}function bz(){}function dG(e,d6){if(!e||(e.$id&&e.$accessors)||(e.nodeName&&e.nodeType>0)){return e}d6=d6||w;var dV=d6.force||w;var dW=d6.old;var d2=dW&&dW.$accessors||w;var dX=new bz();var dZ={};var d0={};var d4=[];var dU=[];var d5={};if(e.$skipArray){d5=dL(e.$skipArray);delete e.$skipArray}var dY=e.$computed;if(dY){delete e.$computed;for(var ap in dY){d0[ap]=true;(function(d8,d9){var d7;dZ[d8]={get:function(){return d7=d9.get.call(this)},set:function(ea){if(typeof d9.set==="function"){var ec=d7;d9.set.call(this,ea);var eb=this[d8];if(this.$fire&&(eb!==ec)){this.$fire(d8,eb,ec)}}},enumerable:true,configurable:true}})(ap,dY[ap])}}for(ap in e){var d3=e[ap];if(!ci[ap]){d0[ap]=true}if(typeof d3==="function"||(d3&&d3.nodeName&&d3.nodeType>0)||(!dV[ap]&&(ap.charAt(0)==="$"||ci[ap]||d5[ap]))){d4.push(ap)}else{if(ds(d3)){cM("warning:计算属性建议放在$computed对象中统一定义");(function(d8,d9){var d7;dZ[d8]={get:function(){return d7=d9.get.call(this)},set:function(ea){if(typeof d9.set==="function"){var ec=d7;d9.set.call(this,ea);var eb=this[d8];if(this.$fire&&(eb!==ec)){this.$fire(d8,eb,ec)}}},enumerable:true,configurable:true}})(ap,d3)}else{dU.push(ap);if(d2[ap]){dZ[ap]=d2[ap]}else{dZ[ap]=b3(ap,d3)}}}}dZ["$model"]=aR;dX=t(dX,dZ,e);function d1(d7){return d0[d7]===true}d4.forEach(function(d7){dX[d7]=e[d7]});dx(dX,"$ups",null);dx(dX,"$id","anonymous");dx(dX,"$up",dW?dW.$up:null);dx(dX,"$track",Object.keys(d0));dx(dX,"$active",false);dx(dX,"$pathname",dW?dW.$pathname:"");dx(dX,"$accessors",dZ);dx(dX,"hasOwnProperty",d1);if(d6.watch){dx(dX,"$watch",function(){return a3.apply(dX,arguments)});dx(dX,"$fire",function(eb,d8){if(eb.indexOf("all!")===0){var d7=eb.slice(4);for(var ea in avalon.vmodels){var d9=avalon.vmodels[ea];d9.$fire&&d9.$fire.apply(d9,[d7,d8])}}else{bb.call(dX,eb,[d8])}})}dU.forEach(function(d8){var d7=dW&&dW[d8];var d9=dX[d8]=e[d8];if(d9&&typeof d9==="object"){d9.$up=dX;d9.$pathname=d8}bb.call(dX,d8,[d9,d7])});for(ap in dY){d3=dX[ap]}dX.$active=true;return dX}function ds(ap){if(ap&&typeof ap==="object"){for(var e in ap){if(e!=="get"&&e!=="set"){return false}}return typeof ap.get==="function"}}function b3(ap,dU){var e;dU=NaN;return{get:function(){if(this.$active){dB(this,ap)}return dU},set:function(dW){if(dU===dW){return}var dV=dU;e=aD(dW,dU);if(e){dU=e}else{e=void 0;dU=dW}if(Object(e)===e){e.$pathname=ap;e.$up=this}if(this.$active){bb.call(this,ap,[dU,dV])}},enumerable:true,configurable:true}}function aD(dX,ap,dY,dW){if(Array.isArray(dX)){return c0(dX,ap,dW)}else{if(avalon.isPlainObject(dX)){if(ap&&typeof ap==="object"){var dV=cQ(dX);var e=cQ(ap);if(dV.join(";")===e.join(";")){for(var dU in dX){if(dX.hasOwnProperty(dU)){ap[dU]=dX[dU]}}return ap}ap.$active=false}return dG(dX,{old:ap,watch:dW})}}if(dY){return dX}}var cQ=ar.test(Object.key)?Object.key:function(e){var ap=[];for(var dU in e){if(e.hasOwnProperty(dU)&&!ci[dU]){ap.push(dU)}}return ap};function c0(dZ,e,dX){if(e){var dU=[0,e.length].concat(dZ);e.splice.apply(e,dU);return e}else{for(var dV in bd){dZ[dV]=bd[dV]}dx(dZ,"$up",null);dx(dZ,"$pathname","");dx(dZ,"$track",c6(dZ.length));dZ._=dG({length:NaN},{watch:true});dZ._.length=dZ.length;dZ._.$watch("length",function(d1,d0){bb.call(dZ.$up,dZ.$pathname+".length",[d1,d0])});if(dX){dx(dZ,"$watch",function(){return a3.apply(dZ,arguments)})}if(aX){Object.defineProperty(dZ,"$model",aR)}else{dZ.$model=cZ(dZ)}for(var ap=0,dY=dZ.length;ap<dY;ap++){var dW=dZ[ap]=aD(dZ[ap],0,1,1);if(Object(dW)===dW){dW.$up=dZ}}return dZ}}function dx(ap,e,dU){if(bI){Object.defineProperty(ap,e,{value:dU,writable:true,enumerable:false,configurable:true})}else{ap[e]=dU}}function cZ(dV){var dX=avalon.type(dV);if(dX==="array"){var dW=[];for(var e=0;e<dV.length;e++){dW[e]=cZ(dV[e])}return dW}else{if(dX==="object"){var dU={};for(e in dV){if(e==="__proxy__"||e==="__data__"||e==="__const__"){continue}if(dV.hasOwnProperty(e)){var ap=dV[e];dU[e]=ap&&ap.nodeType?ap:cZ(ap)}}return dU}}return dV}var aR={get:function(){return cZ(this)},set:l,enumerable:false,configurable:true};if(!bI){if("__defineGetter__" in avalon){c3=function(e,dU,ap){if("value" in ap){e[dU]=ap.value}if("get" in ap){e.__defineGetter__(dU,ap.get)}if("set" in ap){e.__defineSetter__(dU,ap.set)}return e};t=function(ap,e){for(var dU in e){if(e.hasOwnProperty(dU)){c3(ap,dU,e[dU])}}return ap}}if(ch){var I={};cm.execScript(["Function parseVB(code)","\tExecuteGlobal(code)","End Function"].join("\n"),"VBScript");function cE(ap,dV,dU,dW){var e=dV[dU];if(arguments.length===4){e.set.call(ap,dW)}else{return e.get.call(ap)}}t=function(dW,dV,dX){var ap=[];ap.push("\r\n\tPrivate [__data__], [__proxy__]","\tPublic Default Function [__const__](d"+aM+", p"+aM+")","\t\tSet [__data__] = d"+aM+": set [__proxy__] = p"+aM,"\t\tSet [__const__] = Me","\tEnd Function");var dZ={};for(dW in dV){dZ[dW]=true;ap.push("\tPublic Property Let ["+dW+"](val"+aM+")",'\t\tCall [__proxy__](Me,[__data__], "'+dW+'", val'+aM+")","\tEnd Property","\tPublic Property Set ["+dW+"](val"+aM+")",'\t\tCall [__proxy__](Me,[__data__], "'+dW+'", val'+aM+")","\tEnd Property","\tPublic Property Get ["+dW+"]","\tOn Error Resume Next","\t\tSet["+dW+'] = [__proxy__](Me,[__data__],"'+dW+'")',"\tIf Err.Number <> 0 Then","\t\t["+dW+'] = [__proxy__](Me,[__data__],"'+dW+'")',"\tEnd If","\tOn Error Goto 0","\tEnd Property")
}for(dW in dX){if(dZ[dW]!==true){dZ[dW]=true;ap.push("\tPublic ["+dW+"]")}}for(dW in ci){if(dZ[dW]!==true){dZ[dW]=true;ap.push("\tPublic ["+dW+"]")}}ap.push("\tPublic ["+"hasOwnProperty"+"]");ap.push("End Class");var e=ap.join("\r\n");var dY=I[e];if(!dY){dY=bW("VBClass");cm.parseVB("Class "+dY+e);cm.parseVB(["Function "+dY+"Factory(a, b)","\tDim o","\tSet o = (New "+dY+")(a, b)","\tSet "+dY+"Factory = o","End Function"].join("\r\n"));I[e]=dY}var dU=cm[dY+"Factory"](dV,cE);return dU}}}var dl=["push","pop","shift","unshift","splice"];var dT=Array.prototype;var bd={notify:function(){bb.call(this.$up,this.$pathname)},set:function(e,ap){if(((e>>>0)===e)&&this[e]!==ap){if(e>this.length){throw Error(e+"set方法的第一个参数不能大于原数组长度")}bb.call(this.$up,this.$pathname+".*",[ap,this[e]]);this.splice(e,1,ap)}},contains:function(e){return this.indexOf(e)!==-1},ensure:function(e){if(!this.contains(e)){this.push(e)}return this},pushArray:function(e){return this.push.apply(this,e)},remove:function(e){return this.removeAt(this.indexOf(e))},removeAt:function(e){if((e>>>0)===e){return this.splice(e,1)}return[]},size:function(){return this._.length},removeAll:function(dU){if(Array.isArray(dU)){for(var e=this.length-1;e>=0;e--){if(dU.indexOf(this[e])!==-1){b4.call(this.$track,e,1);b4.call(this,e,1)}}}else{if(typeof dU==="function"){for(e=this.length-1;e>=0;e--){var ap=this[e];if(dU(ap,e)){b4.call(this.$track,e,1);b4.call(this,e,1)}}}else{b4.call(this.$track,0,this.length);b4.call(this,0,this.length)}}if(!aX){this.$model=cZ(this)}this.notify();this._.length=this.length},clear:function(){return this.removeAll()}};var b4=dT.splice;dl.forEach(function(ap){var e=dT[ap];bd[ap]=function(){var dV=[];for(var dW=0,dX=arguments.length;dW<dX;dW++){dV[dW]=aD(arguments[dW],0,1,1)}var dU=e.apply(this,dV);g(this.$track,ap,dV);if(!aX){this.$model=cZ(this)}this.notify();this._.length=this.length;return dU}});"sort,reverse".replace(b9,function(e){bd[e]=function(){var dY=this.concat();var dZ=this;var d2=Math.random();var dW=[];var d1=false;dT[e].apply(dZ,arguments);for(var dV=0,dU=dY.length;dV<dU;dV++){var d0=dZ[dV];var ap=dY[dV];if(d0===ap){dW.push(dV)}else{var dX=dY.indexOf(d0);dW.push(dX);dY[dX]=d2;d1=true}}if(d1){bx(this.$track,dW);if(!aX){this.$model=cZ(this)}this.notify()}return this}});function bx(dX,ap){var dV={};for(var dU=0,dW=ap.length;dU<dW;dU++){dV[dU]=dX[dU];var e=ap[dU];if(e in dV){dX[dU]=dV[e];delete dV[e]}else{dX[dU]=dX[e]}}}function c6(dU){var e=[];for(var ap=0;ap<dU;ap++){e[ap]=bW("$proxy$each")}return e}function g(ap,dW,dU){switch(dW){case"push":case"unshift":dU=c6(dU.length);break;case"splice":if(dU.length>2){var e=dU[1];var dV=dU.length-2;dU=[dU[0],dU[1]].concat(c6(dU.length-2))}break}Array.prototype[dW].apply(ap,dU)}var cR=(function(){var e=[];var ap;return{begin:function(dU){e.push(ap);ap=dU},end:function(){ap=e.pop()},collectDependency:function(dU){if(ap){ap.callback(dU)}}}})();var co=/^on$/;function dD(){return new Date()-0}avalon.injectBinding=function(e){e.handler=e.handler||G[e.type].update||l;e.update=function(){var ap=false;if(!e.getter){ap=true;cR.begin({callback:function(d2){ag(d2,e)}});e.getter=cu(e.expr,e.vmodels,e);e.observers.forEach(function(d2){d2.v.$watch(d2.p,e)});delete e.observers}try{var dZ=e.fireArgs,d1,d0;delete e.fireArgs;if(!dZ){if(e.type==="on"){d1=e.getter+""}else{d1=e.getter.apply(0,e.args)}}else{d1=dZ[0];d0=dZ[1]}d0=typeof d0==="undefined"?e.oldValue:d0;if(e._filters){d1=bt.$filter.apply(0,[d1].concat(e._filters))}if(e.signature){var dV=avalon.type(d1);if(dV!=="array"&&dV!=="object"){throw Error("warning:"+e.expr+"只能是对象或数组")}e.xtype=dV;var dW=cp(e.proxies||[],dV);var dY=d1.$track||(dV==="array"?c6(d1.length):Object.keys(d1));e.track=dY;if(dW!==dY.join(";")){e.handler(d1,d0);e.oldValue=1}}else{if(Array.isArray(d1)?d1.length!==(d0&&d0.length):false){e.handler(d1,d0);e.oldValue=d1.concat()}else{if(!("oldValue" in e)||d1!==d0){e.handler(d1,d0);e.oldValue=d1}}}}catch(dX){delete e.getter;cM("warning:exception throwed in [avalon.injectBinding] ",dX);var dU=e.element;if(dU&&dU.nodeType===3){dU.nodeValue=c2+(e.oneTime?"::":"")+e.expr+bE}}finally{ap&&cR.end()}};e.update()};function ag(e,ap){if(ap.oneTime){return}if(e&&avalon.Array.ensure(e,ap)&&ap.element){cS(ap,e);if(new Date()-ck>444){a8()}}}function cp(ap,e){var dU=[];for(var dV=0,dW;dW=ap[dV++];){dU.push(e?dW.$id:dW.$key)}return dU.join(";")}var dA=0;var dr=avalon.$$subscribers=[];var ck=new Date();var aP={};function O(ap){if(!ap.uniqueNumber){var e=ap.element;if(e){if(e.nodeType!==1){ap.uniqueNumber=ap.type+"-"+O(e.parentNode)+"-"+(++dA)}else{ap.uniqueNumber=ap.name+"-"+O(e)}}else{ap.uniqueNumber=++dA}}return ap.uniqueNumber}function cS(dV,dU){var e=dV.lists||(dV.lists=[]);var ap=O(dV);avalon.Array.ensure(e,dU);dU.$uuid=dU.$uuid||bW();if(!dr[ap]){dr[ap]=1;dr.push(dV)}}function a8(dU){var dW=dr.length;var e=dW;var dX=[];var dV={};var d0={};while(dU=dr[--dW]){var dZ=dU.type;if(d0[dZ]){d0[dZ]++}else{d0[dZ]=1;dX.push(dZ)}}var d1=false;dX.forEach(function(d3){if(aP[d3]!==d0[d3]){dV[d3]=1;
d1=true}});dW=e;if(d1){while(dU=dr[--dW]){if(dU.element===null){dr.splice(dW,1);continue}if(dV[dU.type]&&h(dU.element)){dr.splice(dW,1);delete dr[dU.uniqueNumber];var d2=dU.lists;for(var ap=0,dY;dY=d2[ap++];){avalon.Array.remove(d2,dY);avalon.Array.remove(dY,dU)}cb(dU)}}}aP=d0;ck=new Date()}function cb(ap){delete dr[ap.uniqueNumber];ap.element=null;ap.rollback&&ap.rollback();for(var e in ap){ap[e]=null}}function h(dU){try{var ap=dU.parentNode.nodeType}catch(dV){return true}if(dU.ifRemove){if(!dt.contains(dU.ifRemove)&&(aI===dU.parentNode)){dU.parentNode&&dU.parentNode.removeChild(dU);return true}}return dU.msRetain?0:(dU.nodeType===1?!dt.contains(dU):!avalon.contains(dt,dU))}var bR={area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],col:[2,"<table><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],tr:[2,"<table>","</table>"],td:[3,"<table><tr>","</tr></table>"],g:[1,'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1">',"</svg>"],_default:aX?[0,"",""]:[1,"X<div>","</div>"]};bR.th=bR.td;bR.optgroup=bR.option;bR.tbody=bR.tfoot=bR.colgroup=bR.caption=bR.thead;String("circle,defs,ellipse,image,line,path,polygon,polyline,rect,symbol,text,use").replace(b9,function(e){bR[e]=bR.g});var y=/<([\w:]+)/;var dz=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig;var ca=aX?/[^\d\D]/:/(<(?:script|link|style|meta|noscript))/ig;var dm=dL(["","text/javascript","text/ecmascript","application/ecmascript","application/javascript"]);var cd=/<(?:tb|td|tf|th|tr|col|opt|leg|cap|area)/;var b0=cY.createElement("script");var aa=/<|&#?\w+;/;avalon.parseHTML=function(dY){var d0=cy.cloneNode(false);if(typeof dY!=="string"){return d0}if(!aa.test(dY)){d0.appendChild(cY.createTextNode(dY));return d0}dY=dY.replace(dz,"<$1></$2>").trim();var d3=(y.exec(dY)||["",""])[1].toLowerCase(),ap=bR[d3]||bR._default,e=dH,d1,d2;if(!aX){dY=dY.replace(ca,"<br class=msNoScope>$1")}e.innerHTML=ap[1]+dY+ap[2];var dW=e.getElementsByTagName("script");if(dW.length){for(var dX=0,dU;dU=dW[dX++];){if(dm[dU.type]){d2=b0.cloneNode(false);dg.forEach.call(dU.attributes,function(d4){if(d4&&d4.specified){d2[d4.name]=d4.value;d2.setAttribute(d4.name,d4.value)}});d2.text=dU.text;dU.parentNode.replaceChild(d2,dU)}}}if(!aX){var dZ=ap[1]==="X<div>"?e.lastChild.firstChild:e.lastChild;if(dZ&&dZ.tagName==="TABLE"&&d3!=="tbody"){for(dW=dZ.childNodes,dX=0;dU=dW[dX++];){if(dU.tagName==="TBODY"&&!dU.innerHTML){dZ.removeChild(dU);break}}}dW=e.getElementsByTagName("br");var dV=dW.length;while(dU=dW[--dV]){if(dU.className==="msNoScope"){dU.parentNode.removeChild(dU)}}for(dW=e.all,dX=0;dU=dW[dX++];){if(A(dU)){bj(dU)}}}for(dX=ap[0];dX--;e=e.lastChild){}while(d1=e.firstChild){d0.appendChild(d1)}return d0};function A(e){var ap=e.nodeName;return ap.toLowerCase()===ap&&e.scopeName&&e.outerText===""}function bj(e){if(e.currentStyle.behavior!=="url(#default#VML)"){e.style.behavior="url(#default#VML)";e.style.display="inline-block";e.style.zoom=1}}avalon.innerHTML=function(dV,dU){if(!aX&&(!ca.test(dU)&&!cd.test(dU))){try{dV.innerHTML=dU;return}catch(dW){}}var ap=this.parseHTML(dU);this.clearHTML(dV).appendChild(ap)};avalon.clearHTML=function(e){e.textContent="";while(e.firstChild){e.removeChild(e.firstChild)}return e};function bN(e){return e.replace(/([a-z\d])([A-Z]+)/g,"$1-$2").toLowerCase()}function m(e){if(!e||e.indexOf("-")<0&&e.indexOf("_")<0){return e}return e.replace(/[-_][^-_]/g,function(ap){return ap.charAt(1).toUpperCase()})}var Y={_toString:function(){var ap=this.node;var e=ap.className;var dU=typeof e==="string"?e:e.baseVal;return dU.split(/\s+/).join(" ")},_contains:function(e){return(" "+this+" ").indexOf(" "+e+" ")>-1},_add:function(e){if(!this.contains(e)){this._set(this+" "+e)}},_remove:function(e){this._set((" "+this+" ").replace(" "+e+" "," "))},__set:function(e){e=e.trim();var ap=this.node;if(aB.test(ap)){ap.setAttribute("class",e)}else{ap.className=e}}};function bF(ap){if(!("classList" in ap)){ap.classList={node:ap};for(var e in Y){ap.classList[e.slice(1)]=Y[e]}}return ap.classList}"add,remove".replace(b9,function(e){avalon.fn[e+"Class"]=function(ap){var dU=this[0];if(ap&&typeof ap==="string"&&dU&&dU.nodeType===1){ap.replace(/\S+/g,function(dV){bF(dU)[e](dV)})}return this}});avalon.fn.mix({hasClass:function(e){var ap=this[0]||{};return ap.nodeType===1&&bF(ap).contains(e)},toggleClass:function(dX,dU){var dV,ap=0;var dY=String(dX).split(/\s+/);var e=typeof dU==="boolean";while((dV=dY[ap++])){var dW=e?dU:!this.hasClass(dV);this[dW?"addClass":"removeClass"](dV)}return this},attr:function(e,ap){if(arguments.length===2){this[0].setAttribute(e,ap);return this}else{return this[0].getAttribute(e)}},data:function(ap,dU){ap="data-"+bN(ap||"");switch(arguments.length){case 2:this.attr(ap,dU);return this;case 1:var dV=this.attr(ap);return dC(dV);case 0:var e={};dg.forEach.call(this[0].attributes,function(dW){if(dW){ap=dW.name;
if(!ap.indexOf("data-")){ap=m(ap.slice(5));e[ap]=dC(dW.value)}}});return e}},removeData:function(e){e="data-"+bN(e);this[0].removeAttribute(e);return this},css:function(ap,dV){if(avalon.isPlainObject(ap)){for(var dU in ap){avalon.css(this,dU,ap[dU])}}else{var e=avalon.css(this,ap,dV)}return e!==void 0?e:this},position:function(){var dU,dV,ap=this[0],e={top:0,left:0};if(!ap){return}if(this.css("position")==="fixed"){dV=ap.getBoundingClientRect()}else{dU=this.offsetParent();dV=this.offset();if(dU[0].tagName!=="HTML"){e=dU.offset()}e.top+=avalon.css(dU[0],"borderTopWidth",true);e.left+=avalon.css(dU[0],"borderLeftWidth",true);e.top-=dU.scrollTop();e.left-=dU.scrollLeft()}return{top:dV.top-e.top-avalon.css(ap,"marginTop",true),left:dV.left-e.left-avalon.css(ap,"marginLeft",true)}},offsetParent:function(){var e=this[0].offsetParent;while(e&&avalon.css(e,"position")==="static"){e=e.offsetParent}return avalon(e||dt)},bind:function(dU,ap,e){if(this[0]){return avalon.bind(this[0],dU,ap,e)}},unbind:function(dU,ap,e){if(this[0]){avalon.unbind(this[0],dU,ap,e)}return this},val:function(dW){var dV=this[0];if(dV&&dV.nodeType===1){var ap=arguments.length===0;var e=ap?":get":":set";var dU=aY[dv(dV)+e];if(dU){var dX=dU(dV,dW)}else{if(ap){return(dV.value||"").replace(/\r/g,"")}else{dV.value=dW}}}return ap?dX:this}});function dC(ap){try{if(typeof ap==="object"){return ap}ap=ap==="true"?true:ap==="false"?false:ap==="null"?null:+ap+""===ap?+ap:cT.test(ap)?avalon.parseJSON(ap):ap}catch(dU){}return ap}var cT=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,cD=/^[\],:{}\s]*$/,cH=/(?:^|:|,)(?:\s*\[)+/g,c7=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,ce=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g;avalon.parseJSON=cm.JSON?JSON.parse:function(e){if(typeof e==="string"){e=e.trim();if(e){if(cD.test(e.replace(c7,"@").replace(ce,"]").replace(cH,""))){return(new Function("return "+e))()}}avalon.error("Invalid JSON: "+e)}return e};avalon.fireDom=function(dV,ap,dU){if(cY.createEvent){var e=cY.createEvent("Events");e.initEvent(ap,true,true,dU);avalon.mix(e,dU);dV.dispatchEvent(e)}else{if(dt.contains(dV)){e=cY.createEventObject();avalon.mix(e,dU);dV.fireEvent("on"+ap,e)}}};avalon.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(ap,e){avalon.fn[ap]=function(dX){var dU=this[0]||{},dW=cO(dU),dV=ap==="scrollTop";if(!arguments.length){return dW?(e in dW)?dW[e]:dt[ap]:dU[ap]}else{if(dW){dW.scrollTo(!dV?dX:avalon(dW).scrollLeft(),dV?dX:avalon(dW).scrollTop())}else{dU[ap]=dX}}}});function cO(e){return e.window&&e.document?e:e.nodeType===9?e.defaultView||e.parentWindow:false}var z=avalon.cssHooks={};var bV=["","-webkit-","-o-","-moz-","-ms-"];var cc={"float":aX?"cssFloat":"styleFloat"};avalon.cssNumber=dL("animationIterationCount,columnCount,order,flex,flexGrow,flexShrink,fillOpacity,fontWeight,lineHeight,opacity,orphans,widows,zIndex,zoom");avalon.cssName=function(e,dV,dU){if(cc[e]){return cc[e]}dV=dV||dt.style;for(var ap=0,dW=bV.length;ap<dW;ap++){dU=m(bV[ap]+e);if(dU in dV){return(cc[e]=dU)}}return null};z["@:set"]=function(dU,ap,dV){try{dU.style[ap]=dV}catch(dW){}};if(cm.getComputedStyle){z["@:get"]=function(dV,ap){if(!dV||!dV.style){throw new Error("getComputedStyle要求传入一个节点 "+dV)}var e,dU=getComputedStyle(dV,null);if(dU){e=ap==="filter"?dU.getPropertyValue(ap):dU[ap];if(e===""){e=dV.style[ap]}}return e};z["opacity:get"]=function(ap){var e=z["@:get"](ap,"opacity");return e===""?"1":e}}else{var aw=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i;var cJ=/^(top|right|bottom|left)$/;var cC=/alpha\([^)]*\)/i;var X=!!cm.XDomainRequest;var dR="DXImageTransform.Microsoft.Alpha";var ah={thin:X?"1px":"2px",medium:X?"3px":"4px",thick:X?"5px":"6px"};z["@:get"]=function(dX,dV){var dU=dX.currentStyle;var ap=dU[dV];if((aw.test(ap)&&!cJ.test(ap))){var dW=dX.style,dY=dW.left,e=dX.runtimeStyle.left;dX.runtimeStyle.left=dU.left;dW.left=dV==="fontSize"?"1em":(ap||0);ap=dW.pixelLeft+"px";dW.left=dY;dX.runtimeStyle.left=e}if(ap==="medium"){dV=dV.replace("Width","Style");if(dU[dV]==="none"){ap="0px"}}return ap===""?"auto":ah[ap]||ap};z["opacity:set"]=function(dW,ap,dX){var dV=dW.style;var e=isFinite(dX)&&dX<=1?"alpha(opacity="+dX*100+")":"";var dU=dV.filter||"";dV.zoom=1;dV.filter=(cC.test(dU)?dU.replace(cC,e):dU+" "+e).trim();if(!dV.filter){dV.removeAttribute("filter")}};z["opacity:get"]=function(e){var ap=e.filters.alpha||e.filters[dR],dU=ap&&ap.enabled?ap.opacity:100;return(dU/100)+""}}"top,left".replace(b9,function(e){z[e+":get"]=function(dU){var ap=z["@:get"](dU,e);return/px$/.test(ap)?ap:avalon(dU).position()[e]+"px"}});var cv={position:"absolute",visibility:"hidden",display:"block"};var U=/^(none|table(?!-c[ea]).+)/;function ac(dU,dW){if(dU.offsetWidth<=0){if(U.test(z["@:get"](dU,"display"))){var dV={node:dU};for(var e in cv){dV[e]=dU.style[e];dU.style[e]=cv[e]}dW.push(dV)}var ap=dU.parentNode;if(ap&&ap.nodeType===1){ac(ap,dW)}}}"Width,Height".replace(b9,function(dU){var dW=dU.toLowerCase(),ap="client"+dU,e="scroll"+dU,dV="offset"+dU;z[dW+":get"]=function(dZ,d0,dY){var d1=-4;
if(typeof dY==="number"){d1=dY}d0=dU==="Width"?["Left","Right"]:["Top","Bottom"];var dX=dZ[dV];if(d1===2){return dX+avalon.css(dZ,"margin"+d0[0],true)+avalon.css(dZ,"margin"+d0[1],true)}if(d1<0){dX=dX-avalon.css(dZ,"border"+d0[0]+"Width",true)-avalon.css(dZ,"border"+d0[1]+"Width",true)}if(d1===-4){dX=dX-avalon.css(dZ,"padding"+d0[0],true)-avalon.css(dZ,"padding"+d0[1],true)}return dX};z[dW+"&get"]=function(dY){var dZ=[];ac(dY,dZ);var d1=z[dW+":get"](dY);for(var dX=0,d0;d0=dZ[dX++];){dY=d0.node;for(var d2 in d0){if(typeof d0[d2]==="string"){dY.style[d2]=d0[d2]}}}return d1};avalon.fn[dW]=function(dY){var dX=this[0];if(arguments.length===0){if(dX.setTimeout){return dX["inner"+dU]||dX.document.documentElement[ap]||dX.document.body[ap]}if(dX.nodeType===9){var dZ=dX.documentElement;return Math.max(dX.body[e],dZ[e],dX.body[dV],dZ[dV],dZ[ap])}return z[dW+"&get"](dX)}else{return this.css(dW,dY)}};avalon.fn["inner"+dU]=function(){return z[dW+":get"](this[0],void 0,-2)};avalon.fn["outer"+dU]=function(dX){return z[dW+":get"](this[0],void 0,dX===true?2:0)}});avalon.fn.offset=function(){var ap=this[0],dW={left:0,top:0};if(!ap||!ap.tagName||!ap.ownerDocument){return dW}var d1=ap.ownerDocument,dX=d1.body,d0=d1.documentElement,dY=d1.defaultView||d1.parentWindow;if(!avalon.contains(d0,ap)){return dW}if(ap.getBoundingClientRect){dW=ap.getBoundingClientRect()}var dV=d0.clientTop||dX.clientTop,dZ=d0.clientLeft||dX.clientLeft,e=Math.max(dY.pageYOffset||0,d0.scrollTop,dX.scrollTop),dU=Math.max(dY.pageXOffset||0,d0.scrollLeft,dX.scrollLeft);return{top:dW.top+e-dV,left:dW.left+dU-dZ}};function dv(ap){var e=ap.tagName.toLowerCase();return e==="input"&&/checkbox|radio/.test(ap.type)?"checked":e}var dk=/^<option(?:\s+\w+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s>]+))?)*\s+value[\s=]/i;var aY={"option:get":ch?function(e){return dk.test(e.outerHTML)?e.value:e.text.trim()}:function(e){return e.value},"select:get":function(e,dZ){var dU,d1=e.options,dW=e.selectedIndex,dX=aY["option:get"],dV=e.type==="select-one"||dW<0,d0=dV?null:[],dY=dV?dW+1:d1.length,ap=dW<0?dY:dV?dW:0;for(;ap<dY;ap++){dU=d1[ap];if((dU.selected||ap===dW)&&!dU.disabled){dZ=dX(dU);if(dV){return dZ}d0.push(dZ)}}return d0},"select:set":function(dW,ap,dX){ap=[].concat(ap);var e=aY["option:get"];for(var dU=0,dV;dV=dW.options[dU++];){if((dV.selected=ap.indexOf(e(dV))>-1)){dX=true}}if(!dX){dW.selectedIndex=-1}}};var dN={};var cf=["break,case,catch,continue,debugger,default,delete,do,else,false","finally,for,function,if,in,instanceof,new,null,return,switch,this","throw,true,try,typeof,var,void,while,with","abstract,boolean,byte,char,class,const,double,enum,export,extends","final,float,goto,implements,import,int,interface,long,native","package,private,protected,public,short,static,super,synchronized","throws,transient,volatile","arguments,let,yield,undefined"].join(",");cf.replace(/\w+/g,function(e){dN[e]=true});var bi=/[a-z_$]/i;var cA=/[\s\uFEFF\xA0]/;function x(d1,dX){var d6=[];var d5=!!dX;dX=dX||0;var ap="unknown";var dV="";for(var dW=0;dW<d1.length;dW++){var d0=d1.charAt(dW);if(d0==="'"||d0==='"'){if(ap==="unknown"){ap=d0}else{if(ap===d0){ap="unknown"}}}else{if(d0==="\\"){if(ap==="'"||ap==='"'){dW++}}else{if(bi.test(d0)){if(ap==="unknown"){ap="variable";dV=d0}else{if(ap==="maybePath"){dV=d6.pop();dV+="."+d0;ap="variable"}else{if(ap==="variable"){dV+=d0}}}}else{if(/\w/.test(d0)){if(ap==="variable"){dV+=d0}}else{if(d0==="."){if(ap==="variable"){if(dV){d6.push(dV);dV="";ap="maybePath"}}}else{if(d0==="["){if(ap==="variable"||ap==="maybePath"){if(dV){d6.push(dV);dV=""}var d3=d6.length;var d2=d6[d3-1];var dU=x(d1.slice(dW),dW);if(dU.length){d6[d3-1]=d2+".*";d6=dU.concat(d6)}else{var dZ=d1.slice(dW+1,dU.i);try{var d4=(bw(["return "+dZ]))();d6[d3-1]=d2+"."+d4}catch(dY){}}ap="maybePath";dW=dU.i}}else{if(d0==="]"){if(d5){d6.i=dW+dX;bH(d6,dV);return d6}}else{if(cA.test(d0)&&d0!=="\r"&&d0!=="\n"){if(ap==="variable"){if(bH(d6,dV)){ap="maybePath"}dV=""}}else{bH(d6,dV);ap="unknown";dV=""}}}}}}}}}bH(d6,dV);return d6}function bH(ap,e){if(e&&!dN[e]){ap.push(e);return true}}function b6(dZ,d0,ap,d1){var dY=[],dX=" = "+ap+".";for(var dU=dZ.length,e;e=dZ[--dU];){var dW=e.split("."),d2;var dV=dW[0];while(d2=dW.shift()){if(d0.hasOwnProperty(d2)){dY.push(dV+dX+dV);d1.observers.push({v:d0,p:e});dZ.splice(dU,1)}}}return dY}var dM=/(\$proxy\$[a-z]+)\d+$/;var cN=new i(218);var bA=new i(128);function cL(dW){dW=dW.trim();var ap=cN.get(dW);if(ap){return ap.concat()}var dY=x(dW);var dX={};var e=[];for(var dU=0,dV;dV=dY[dU++];){if(!dX[dV]){dX[dV]=1;e.push(dV)}}return cN.put(dW,e).concat()}function cu(e,d9,d2){var dV=d2.filters;if(typeof dV==="string"&&dV.trim()&&!d2._filters){d2._filters=r(dV.trim())}var d0=cL(e);var dX=new Date()-0;var dW=[];var dY=[];var ap=[];d2.observers=[];for(var d5=0,d8=d9.length;d5<d8;d5++){if(d0.length){var ec="vm"+dX+"_"+d5;dY.push(ec);ap.push(d9[d5]);dW.push.apply(dW,b6(d0,d9[d5],ec,d2))}}d2.args=ap;var d3=d2.type;var ea=d9.map(function(ed){return String(ed.$id).replace(dM,"$1")})+e+d3;var dU=bA.get(ea);
if(dU){if(d3==="duplex"){var eb=bA.get(ea+"setter");d2.setter=eb.apply(eb,d2.args)}return d2.getter=dU}if(!dW.length){dW.push("fix"+dX)}if(d3==="duplex"){var dZ={};dW.forEach(function(ee){var ed=ee.split("=");dZ[ed[0].trim()]=ed[1].trim()});e=e.replace(/[\$\w]+/,function(ed){return dZ[ed]?dZ[ed]:ed});var d7=bw(dY.concat("'use strict';"+"return function(vvv){"+e+" = vvv\n}\n"));bA.put(ea+"setter",d7);d2.setter=d7.apply(d7,d2.args)}if(d3==="on"){if(e.indexOf("(")===-1){e+=".call(this, $event)"}else{e=e.replace("(",".call(this,")}dY.push("$event");e="\nreturn "+e+";";var d6=e.lastIndexOf("\nreturn");var d4=e.slice(0,d6);var d1=e.slice(d6);e=d4+"\n"+d1}else{e="\nreturn "+e+";"}dU=bw(dY.concat("'use strict';\nvar "+dW.join(",\n")+e));return bA.put(ea,dU)}function ax(ap){var e=am.test(ap);if(e){var dU=dd(ap);if(dU.length===1){return dU[0].expr}return dU.map(function(dV){return dV.type?"("+dV.expr+")":aA(dV.expr)}).join(" + ")}else{return ap}}avalon.normalizeExpr=ax;avalon.parseExprProxy=cu;var aU=/\)\s*$/;var bY=/\)\s*\|/g;var k=/\|\s*([$\w]+)/g;var cn=/"\s*\["/g;var K=/"\s*\(/g;function r(e){e=e.replace(aU,"").replace(bY,function(){return"],|"}).replace(k,function(dU,ap){return"["+aA(ap)}).replace(cn,function(){return'"],["'}).replace(K,function(){return'",'})+"]";return bw(["return ["+e+"]"])()}var bT={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};var aA=cm.JSON&&JSON.stringify||function(e){return'"'+e.replace(/[\\\"\x00-\x1f]/g,function(ap){var dU=bT[ap];return typeof dU==="string"?dU:"\\u"+("0000"+ap.charCodeAt(0).toString(16)).slice(-4)})+'"'};avalon.scan=function(ap,dU){ap=ap||dt;var e=dU?[].concat(dU):[];bS(ap,e)};var bl=dL("area,base,basefont,br,col,command,embed,hr,img,input,link,meta,param,source,track,wbr,noscript,script,style,textarea".toUpperCase());function d(e,dV,dU){var ap=setTimeout(function(){var dW=e.innerHTML;clearTimeout(ap);if(dW===dU){dV()}else{d(e,dV,dW)}})}function T(e,ap){var dU=e.getAttribute("avalonctrl")||ap.$id;e.setAttribute("avalonctrl",dU);if(ap.$events){ap.$events.expr=e.tagName+'[avalonctrl="'+dU+'"]'}}var a2=function(dW,ap,e){var dX=dW.getAttribute(ap);if(dX){for(var dU=0,dV;dV=e[dU++];){if(dV.hasOwnProperty(dX)&&typeof dV[dX]==="function"){return dV[dX]}}}};function de(dV,e){for(var ap=0,dU;dU=dV[ap++];){dU.vmodels=e;G[dU.type].init(dU);avalon.injectBinding(dU);if(dU.getter&&dU.element.nodeType===1){dU.element.removeAttribute(dU.name)}}dV.length=0}var bf=ch&&cm.MutationObserver?function(dU){var ap=dU.firstChild,dV;while(ap){var e=ap.nextSibling;if(ap.nodeType===3){if(dV){dV.nodeValue+=ap.nodeValue;dU.removeChild(ap)}else{dV=ap}}else{dV=null}ap=e}}:0;var aH=/^\s*::/;var ba=/ms-(\w+)-?(.*)/;var dF=dL("animationend,blur,change,input,click,dblclick,focus,keydown,keypress,keyup,mousedown,mouseenter,mouseleave,mousemove,mouseout,mouseover,mouseup,scan,scroll,submit");var cW=dL("value,title,alt,checked,selected,disabled,readonly,enabled,href,src");function M(ap,e){return ap.priority-e.priority}var c5=/^(ms-\S+|data-\S+|on[a-z]+|id|style|class)$/;var at=/^on\-[\w-]+$/;function v(dY,dW){var ap=dY.attributes;var dV={};for(var dX=0,e;e=ap[dX++];){var dU=e.name;if(e.specified&&!c5.test(dU)){var dZ=m(e.name);if(/^on\-[\w-]+$/.test(dU)){dV[dZ]=a2(dY,dU,dW)}else{dV[dZ]=dC(e.value)}}}return dV}function cl(d8,d7,dX){var ap=true;if(d7.length){var dY=P?P(d8):d8.attributes;var d9=[];var d1={};for(var d5=0,d4;d4=dY[d5++];){var ea=d4.name;if(d1[ea]){continue}d1[ea]=1;if(d4.specified){if(dX=ea.match(ba)){var dV=dX[1];var dW=dX[2]||"";var d3=d4.value;if(dF[dV]){dW=dV;dV="on"}else{if(cW[dV]){dW=dV;dV="attr";ea="ms-"+dV+"-"+dW;cM("warning!请改用"+ea+"代替"+d4.name+"!")}}if(G[dV]){var d0=d3.replace(aH,"");var dU=d3!==d0;var d2={type:dV,param:dW,element:d8,name:ea,expr:d0,oneTime:dU,uniqueNumber:d4.name+"-"+O(d8),priority:(G[dV].priority||dV.charCodeAt(0)*10)+(Number(dW.replace(/\D/g,""))||0)};if(dV==="html"||dV==="text"){var dZ=q(d3).filters;d2.expr=d2.expr.replace(dZ,"");d2.filters=dZ.replace(dO,function(){d2.type="html";d2.group=1;return""}).trim()}else{if(dV==="duplex"){var e=ea}else{if(ea==="ms-if-loop"){d2.priority+=100}else{if(ea==="ms-attr-value"){var d6=ea}}}}d9.push(d2)}}}}if(d9.length){d9.sort(M);if(e&&d6&&d8.nodeName==="INPUT"&&d8.type==="text"){cM("warning!一个控件不能同时定义ms-attr-value与"+e)}for(d5=0;d2=d9[d5];d5++){dV=d2.type;if(by.test(dV)){return de(d9.slice(0,d5+1),d7)}else{if(ap){ap=!dE.test(dV)}}}de(d9,d7)}}if(ap&&!bl[d8.tagName]&&(b2(d8)?d8.msResolved:1)){bf&&bf(d8);aS(d8,d7)}}var by=/^if|widget|repeat$/;var dE=/^each|with|html|include$/;if(!aX){var db=new i(512);var bX=/\s+([^=\s]+)(?:=("[^"]*"|'[^']*'|[^\s>]+))?/g,cq=/^['"]/,bG=/<\w+\b(?:(["'])[^"]*?(\1)|[^>])*>/i,S=/&amp;/g;var P=function(ap){var dW=ap.outerHTML;if(dW.slice(0,2)==="</"||!dW.trim()){return[]}var dZ=dW.match(bG)[0];var dV=[],dU,d0;var dX=db.get(dZ);if(dX){return dX}while(dU=bX.exec(dZ)){d0=dU[2];if(d0){d0=(cq.test(d0)?d0.slice(1,-1):d0).replace(S,"&")}var e=dU[1].toLowerCase();match=e.match(ba);var dY={name:e,specified:true,value:d0||""};
dV.push(dY)}return db.put(dZ,dV)}}function aS(dU,ap){var e=avalon.slice(dU.childNodes);a0(e,ap)}function a0(ap,dU){for(var dV=0,dX;dX=ap[dV++];){switch(dX.nodeType){case 1:var dW=dX;if(!dW.msResolved&&dW.parentNode&&dW.parentNode.nodeType===1){var e=b2(dW);if(e){var dY=dW.localName?dW.localName.replace(e+":",""):dW.nodeName;var dZ=e+":"+m(dY);aq.push({library:e,element:dW,fullName:dZ,widget:dY,vmodels:dU,name:"widget"});if(avalon.components[dZ]){(function(d0){setTimeout(function(){avalon.component(d0)})})(dZ)}}}bS(dX,dU);if(dX.msHasEvent){avalon.fireDom(dX,"datasetchanged",{bubble:dX.msHasEvent})}break;case 3:if(am.test(dX.nodeValue)){E(dX,dU,dV)}break}}}function bS(dX,dV,dW){var ap=dX.getAttribute("ms-skip");if(!dX.getAttributeNode){return cM("warning "+dX.tagName+" no getAttributeNode method")}var e=dX.getAttributeNode("ms-important");var dZ=dX.getAttributeNode("ms-controller");if(typeof ap==="string"){return}else{if(dW=e||dZ){var dY=avalon.vmodels[dW.value];if(!dY){return}dV=dW===e?[dY]:[dY].concat(dV);var dU=dW.name;dX.removeAttribute(dU);avalon(dX).removeClass(dU);T(dX,dY)}}cl(dX,dV)}var dO=/\|\s*html(?:\b|$)/,bP=/\|\|/g,dy=/&lt;/g,ay=/&gt;/g,bh=/(['"])(\\\1|.)+?\1/g;function q(dU){if(dU.indexOf("|")>0){var e=dU.replace(bh,function(dV){return Array(dV.length+1).join("1")});var ap=e.replace(bP,"\u1122\u3344").indexOf("|");if(ap>-1){return{type:"text",filters:dU.slice(ap).trim(),expr:dU.slice(0,ap)}}}return{type:"text",expr:dU,filters:""}}function dd(dV){var dU=[],ap,dW=0,e;do{e=dV.indexOf(c2,dW);if(e===-1){break}ap=dV.slice(dW,e);if(ap){dU.push({expr:ap})}dW=e+c2.length;e=dV.indexOf(bE,dW);if(e===-1){break}ap=dV.slice(dW,e);if(ap){dU.push(q(ap,dW))}dW=e+bE.length}while(1);ap=dV.slice(dW);if(ap){dU.push({expr:ap})}return dU}function E(dY,ap,e){var dZ=[],dX=dd(dY.data);if(dX.length){for(var dV=0,dU;dU=dX[dV++];){var dW=cY.createTextNode(dU.expr);if(dU.type){dU.expr=dU.expr.replace(aH,function(){dU.oneTime=true;return""});dU.element=dW;dU.filters=dU.filters.replace(dO,function(){dU.type="html";return""});dU.pos=e*1000+dV;dZ.push(dU)}cy.appendChild(dW)}dY.parentNode.replaceChild(cy,dY);if(dZ.length){de(dZ,ap)}}}var cP=function(){this.queue=[]};cP.prototype={render:function(ap){if(!this.locked){this.locked=ap?dt.offsetHeight+10:1;var e=this;avalon.nextTick(function(){e.flush()})}},flush:function(){for(var e=0,ap;ap=this.queue[e++];){ap.update&&ap.update()}this.locked=0;this.queue=[]}};var dI=new cP();var aq=[];var bJ=[];var W={$construct:function(){return avalon.mix.apply(null,arguments)},$ready:l,$init:l,$dispose:l,$container:null,$childReady:l,$replace:false,$extend:null,$$template:function(e){return e}};avalon.components={};avalon.component=function(e,dU){if(dU){avalon.components[e]=avalon.mix({},W,dU)}for(var ap=0,dV;dV=aq[ap];ap++){if(e===dV.fullName){aq.splice(ap,1);ap--;(function(eg,d0,ep,d4){if(!avalon.contains(cY,ep)){avalon.Array.remove(aq,eg);return}var ec=1;var ek=eg.library;var en=avalon.libraries[ek]||W;if(ep.getAttribute("ms-attr-identifier")){return}var ea=v(ep,eg.vmodels);var ee=cX(eg.vmodels,ea.config||eg.widget);var ed=ea.$id||ea.identifier||bW(d4);delete ea.config;delete ea.$id;delete ea.identifier;var d6={};var eq=avalon.components[d0.$extend];if(eq){avalon.mix(true,d6,eq);d6=eq.$construct.call(ep,d6,{},{})}else{avalon.mix(true,d6,d0)}d6=avalon.components[e].$construct.call(ep,d6,ee,ea);d6.$refs={};d6.$id=ed;var d8=d6.$slot;var d9=d6.$replace;var eo=d6.$container;var dW=d6.$template;delete d6.$slot;delete d6.$replace;delete d6.$container;delete d6.$construct;var em=avalon.define(d6)||{};ep.msResolved=1;em.$init(em,ep);en.$init(em,ep);var ei=ep.childNodes;var eb={},eh;for(var ef=0,dZ;dZ=ei[ef++];){var d2=dZ.nodeType===1&&dZ.getAttribute("slot")||d8;if(d2){if(eb[d2]){eb[d2].push(dZ)}else{eb[d2]=[dZ]}}}if(em.$$template){avalon.clearHTML(ep);ep.innerHTML=em.$$template(dW)}for(ef in eb){if(em.hasOwnProperty(ef)){var ej=eb[ef];if(ej.length){var dX=cy.cloneNode(true);for(var es=0;eh=ej[es++];){dX.appendChild(eh)}em[ef]=dX}eb[ef]=null}}eb=null;var d7=ep.children[0]||ep.firstChild;if(d9){ep.parentNode.replaceChild(d7,ep);d7.msResolved=1;var er=ep.style.cssText;var d1=ep.className;ep=eg.element=d7;ep.style.cssText=er;if(d1){avalon(ep).addClass(d1)}}if(eo){eo.appendChild(ep)}avalon.fireDom(ep,"datasetchanged",{library:ek,vm:em,childReady:1});var d5=0;var d3=avalon.bind(ep,"datasetchanged",function(et){if(et.childReady&&et.library===ek){ec+=et.childReady;if(em!==et.vm){em.$refs[et.vm.$id]=et.vm;if(et.childReady===-1){d5++;em.$childReady(em,ep,et)}et.stopPropagation()}}if(ec===0){var el=setTimeout(function(){clearTimeout(el);em.$ready(em,ep,eg.vmodels);en.$ready(em,ep,eg.vmodels)},d5?Math.max(d5*17,100):17);avalon.unbind(ep,"datasetchanged",d3);eg.rollback=function(){try{em.$dispose(em,ep);en.$dispose(em,ep)}catch(eu){}delete avalon.vmodels[em.$id]};cS(eg,bJ);if(cm.chrome){ep.addEventListener("DOMNodeRemovedFromDocument",function(){setTimeout(a8)})}}});bS(ep,[em].concat(eg.vmodels));avalon.vmodels[em.$id]=em;
if(!ep.childNodes.length){avalon.fireDom(ep,"datasetchanged",{library:ek,vm:em,childReady:-1})}else{var dY=setTimeout(function(){clearTimeout(dY);avalon.fireDom(ep,"datasetchanged",{library:ek,vm:em,childReady:-1})},17)}})(dV,avalon.components[e],dV.element,dV.widget)}}};function cX(dU,dW){if(dW){for(var dV=0,ap;ap=dU[dV++];){if(ap.hasOwnProperty(dW)&&typeof ap[dW]==="object"){var e=ap[dW];return e.$model||e;break}}}return{}}avalon.libraries=[];avalon.library=function(e,ap){if(cY.namespaces){cY.namespaces.add(e,"http://www.w3.org/1999/xhtml")}avalon.libraries[e]=avalon.mix({$init:l,$ready:l,$dispose:l},ap||{})};avalon.library("ms");function b2(ap){if(ap.scopeName&&ap.scopeName!=="HTML"){return ap.scopeName}var dU=ap.nodeName.toLowerCase();var e=dU.indexOf(":");if(e>0){return dU.slice(0,e)}}var dh=["autofocus,autoplay,async,allowTransparency,checked,controls","declare,disabled,defer,defaultChecked,defaultSelected","contentEditable,isMap,loop,multiple,noHref,noResize,noShade","open,readOnly,selected"].join(",");var C={};dh.replace(b9,function(e){C[e.toLowerCase()]=e});var bv={"accept-charset":"acceptCharset","char":"ch","charoff":"chOff","class":"className","for":"htmlFor","http-equiv":"httpEquiv"};var j=["accessKey,bgColor,cellPadding,cellSpacing,codeBase,codeType,colSpan","dateTime,defaultValue,frameBorder,longDesc,maxLength,marginWidth,marginHeight","rowSpan,tabIndex,useMap,vSpace,valueType,vAlign"].join(",");j.replace(b9,function(e){bv[e.toLowerCase()]=e});var ao=avalon.directive("attr",{init:function(dU){dU.expr=ax(dU.expr.trim());if(dU.type==="include"){var ap=dU.element;c9(ap,dU);dU.includeRendered=a2(ap,"data-include-rendered",dU.vmodels);dU.includeLoaded=a2(ap,"data-include-loaded",dU.vmodels);var e=dU.includeReplace=!!avalon(ap).data("includeReplace");if(avalon(ap).data("includeCache")){dU.templateCache={}}dU.start=cY.createComment("ms-include");dU.end=cY.createComment("ms-include-end");if(e){dU.element=dU.end;dU._element=ap;ap.parentNode.insertBefore(dU.start,ap);ap.parentNode.insertBefore(dU.end,ap.nextSibling)}else{ap.insertBefore(dU.start,ap.firstChild);ap.appendChild(dU.end)}}},update:function(dX){var dW=this.element;var ap=this.param;if(ap==="href"||ap==="src"){if(typeof dX==="string"&&!dt.hasAttribute){dX=dX.replace(/&amp;/g,"&")}dW[ap]=dX;if(cm.chrome&&dW.tagName==="EMBED"){var dV=dW.parentNode;var dZ=document.createComment("ms-src");dV.replaceChild(dZ,dW);dV.replaceChild(dW,dZ)}}else{var dU=(dX===false)||(dX===null)||(dX===void 0);if(!aX&&bv[ap]){ap=bv[ap]}var e=C[ap];if(typeof dW[e]==="boolean"){dW[e]=!!dX;if(!dX){dU=true}}if(dU){return dW.removeAttribute(ap)}var dY=aB.test(dW)?false:(cY.namespaces&&A(dW))?true:ap in dW.cloneNode(false);if(dY){dW[ap]=dX+""}else{dW.setAttribute(ap,dX)}}}});"title,alt,src,value,css,include,href".replace(b9,function(e){G[e]=ao});avalon.directive("class",{init:function(dX){var dV=dX.param;var e=dX.type;if(!dV||isFinite(dV)){dX.param="";G.effect.init(dX)}else{cM("ms-"+e+'-xxx="yyy"这种用法已经过时,请使用ms-'+e+'="xxx:yyy"');dX.expr="["+aA(dV)+","+dX.expr+"]";dX.oldStyle=dV}if(e==="hover"||e==="active"){if(!dX.hasBindEvent){var dU=dX.element;var ap=avalon(dU);var dW="mouseenter";var d1="mouseleave";if(e==="active"){dU.tabIndex=dU.tabIndex||-1;dW="mousedown";d1="mouseup";var d0=ap.bind("mouseleave",function(){dX.toggleClass&&ap.removeClass(dX.newClass)})}}var dZ=ap.bind(dW,function(){dX.toggleClass&&ap.addClass(dX.newClass)});var dY=ap.bind(d1,function(){dX.toggleClass&&ap.removeClass(dX.newClass)});dX.rollback=function(){ap.unbind("mouseleave",d0);ap.unbind(dW,dZ);ap.unbind(d1,dY)};dX.hasBindEvent=true}},update:function(e){var dU=this;var ap=avalon(this.element);dU.newClass=e[0];dU.toggleClass=!!e[1];if(dU.oldClass&&dU.newClass!==dU.oldClass){ap.removeClass(dU.oldClass)}dU.oldClass=dU.newClass;if(dU.type==="class"){if(dU.oldStyle){ap.toggleClass(dU.oldStyle,!!e[1])}else{ap.toggleClass(dU.newClass,dU.toggleClass)}}}});"hover,active".replace(b9,function(e){G[e]=G["class"]});avalon.directive("css",{init:G.attr.init,update:function(e){avalon(this.element).css(this.param,e)}});avalon.directive("data",{priority:100,update:function(dU){var ap=this.element;var e="data-"+this.param;if(dU&&typeof dU==="object"){ap[e]=dU}else{ap.setAttribute(e,String(dU))}}});var b5=/^(?:checkbox|radio)$/;var bm=/^(?:radio|checked)$/;var dK=/^(file|button|reset|submit|checkbox|radio|range)$/;var dj=avalon.directive("duplex",{priority:2000,init:function(dZ,d0){var dU=dZ.element;var ap=dZ.vmodels;dZ.changed=a2(dU,"data-duplex-changed",ap)||l;var dV=[];var dW=dL("string,number,boolean,checked");if(dU.type==="radio"&&dZ.param===""){dZ.param="checked"}dZ.param.replace(f,function(d4){if(b5.test(dU.type)&&bm.test(d4)){if(d4==="radio"){cM("ms-duplex-radio已经更名为ms-duplex-checked")}d4="checked";dZ.isChecked=true;dZ.xtype="radio"}if(d4==="bool"){d4="boolean";cM("ms-duplex-bool已经更名为ms-duplex-boolean")}else{if(d4==="text"){d4="string";cM("ms-duplex-text已经更名为ms-duplex-string")}}if(dW[d4]){d0=true}avalon.Array.ensure(dV,d4)
});if(!d0){dV.push("string")}dZ.param=dV.join("-");if(!dZ.xtype){dZ.xtype=dU.tagName==="SELECT"?"select":dU.type==="checkbox"?"checkbox":dU.type==="radio"?"radio":/^change/.test(dU.getAttribute("data-duplex-event"))?"change":"input"}dZ.bound=function(d5,d6){if(dU.addEventListener){dU.addEventListener(d5,d6,false)}else{dU.attachEvent("on"+d5,d6)}var d4=dZ.rollback;dZ.rollback=function(){dU.avalonSetter=null;avalon.unbind(dU,d5,d6);d4&&d4()}};var d2=false;function d3(d4){dZ.changed.call(this,d4,dZ)}function e(){d2=true}function dX(){d2=false;setTimeout(d1)}var d1=function(d6){var d7=dU.value;if(d2||d7===dZ.oldValue||dZ.pipe===null){return}var d4=dZ.pipe(d7,dZ,"get");try{dZ.setter(d4);d3.call(dU,d4)}catch(d5){cM(d5)}};switch(dZ.xtype){case"radio":dZ.bound("click",function(){var d4=dZ.pipe(dU.value,dZ,"get");try{dZ.setter(d4);d3.call(dU,d4)}catch(d5){cM(d5)}});break;case"checkbox":dZ.bound(aX?"change":"click",function(){var d6=dU.checked?"ensure":"remove";var d5=dZ.getter.apply(0,dZ.vmodels);if(!Array.isArray(d5)){cM("ms-duplex应用于checkbox上要对应一个数组");d5=[d5]}var d4=dZ.pipe(dU.value,dZ,"get");avalon.Array[d6](d5,d4);d3.call(dU,d5)});break;case"change":dZ.bound("change",d1);break;case"input":if(!ch){dZ.bound("input",d1);dZ.bound("compositionstart",e);dZ.bound("compositionend",dX);dZ.bound("DOMAutoComplete",d1)}else{if(ch>8){dZ.bound("input",d1)}else{dZ.bound("propertychange",function(d4){if(d4.propertyName==="value"){d1()}})}dZ.bound("dragend",function(){setTimeout(function(){d1()},17)})}break;case"select":dZ.bound("change",function(){var d5=avalon(dU).val();if(Array.isArray(d5)){d5=d5.map(function(d6){return dZ.pipe(d6,dZ,"get")})}else{d5=dZ.pipe(d5,dZ,"get")}if(d5+""!==dZ.oldValue){try{dZ.setter(d5)}catch(d4){cM(d4)}}});dZ.bound("datasetchanged",function(d6){if(d6.bubble==="selectDuplex"){var d4=dZ._value;var d5=Array.isArray(d4)?d4.map(String):d4+"";avalon(dU).val(d5);dU.oldValue=d5+"";d3.call(dU,d5)}});break}if(dZ.xtype==="input"&&!dK.test(dU.type)){if(dU.type!=="hidden"){var dY;dZ.bound("focus",function(){dU.msFocus=true;dY=dU.value});dZ.bound("blur",function(){dU.msFocus=false;if(ch&&dY!==dU.value){dY=dU.value;avalon.fireDom(dU,"change")}})}dU.avalonSetter=d1;bu(function(){if(dU.contains(dU)){if(!this.msFocus&&dZ.oldValue!==dU.value){d1()}}else{if(!dU.msRetain){return false}}})}},update:function(d1){var ap=this.element,dZ=this,dU;if(!this.init){for(var dV in avalon.vmodels){var d2=avalon.vmodels[dV];d2.$fire("avalon-ms-duplex-init",dZ)}var dY=dZ.pipe||(dZ.pipe=bq);dY(null,dZ,"init");this.init=1}switch(this.xtype){case"input":case"change":dU=this.pipe(d1,this,"set");if(dU!==this.oldValue){var d3=false;if(ap.msFocus){try{var d0=af(ap);if(d0.start===d0.end){d0=d0.start;d3=true}}catch(dX){}}ap.value=this.oldValue=dU;if(d3){c4(ap,d0,d0)}}break;case"radio":dU=dZ.isChecked?!!d1:d1+""===ap.value;if(ch===6){setTimeout(function(){ap.defaultChecked=dU;ap.checked=dU},31)}else{ap.checked=dU}break;case"checkbox":var dW=[].concat(d1);dU=this.pipe(ap.value,this,"get");ap.checked=dW.indexOf(dU)>-1;break;case"select":dZ._value=d1;if(!ap.msHasEvent){ap.msHasEvent="selectDuplex"}else{avalon.fireDom(ap,"datasetchanged",{bubble:ap.msHasEvent})}break}}});if(ch){avalon.bind(cY,"selectionchange",function(dU){var ap=cY.activeElement||{};if(typeof ap.avalonSetter==="function"&&!ap.msFocus){ap.avalonSetter()}})}function ae(e){return e==null?"":e}avalon.duplexHooks={checked:{get:function(ap,e){return !e.oldValue}},string:{get:function(e){return e},set:ae},"boolean":{get:function(e){return e==="true"},set:ae},number:{get:function(dV,dU){var ap=parseFloat(dV+"");if(-dV===-ap){return ap}var e=/strong|medium|weak/.exec(dU.element.getAttribute("data-duplex-number"))||["medium"];switch(e[0]){case"strong":return 0;case"medium":return dV===""?"":0;case"weak":return dV}},set:ae}};function bq(dU,ap,e){ap.param.replace(f,function(dV){var dW=avalon.duplexHooks[dV];if(dW&&typeof dW[e]==="function"){dU=dW[e](dU,ap)}});return dU}var N,da=[];avalon.tick=function(e){if(da.push(e)===1){N=setInterval(cV,60)}};function cV(){for(var ap=da.length-1;ap>=0;ap--){var e=da[ap];if(e()===false){da.splice(ap,1)}}if(!da.length){clearInterval(N)}}var bu=l;new function(){try{var dU={};var dY=HTMLInputElement.prototype;var dW=HTMLTextAreaElement.prototype;function ap(e){dU[this.tagName].call(this,e);if(!this.msFocus&&this.avalonSetter&&this.oldValue!==e){this.avalonSetter()}}var dX=HTMLInputElement.prototype;Object.getOwnPropertyNames(dX);dU["INPUT"]=Object.getOwnPropertyDescriptor(dY,"value").set;Object.defineProperty(dY,"value",{set:ap});dU["TEXTAREA"]=Object.getOwnPropertyDescriptor(dW,"value").set;Object.defineProperty(dW,"value",{set:ap})}catch(dV){bu=avalon.tick}};function af(dU){var dV=NaN,e=NaN;if(dU.setSelectionRange){dV=dU.selectionStart;e=dU.selectionEnd}else{if(document.selection&&document.selection.createRange){var ap=document.selection.createRange();dV=0-ap.duplicate().moveStart("character",-100000);e=dV+ap.text.length}}return{start:dV,end:e}}function c4(dV,dU,e){if(!dV.value||dV.readOnly){return
}if(dV.createTextRange){var ap=dV.createTextRange();ap.collapse(true);ap.moveStart("character",dU);ap.select()}else{dV.selectionStart=dU;dV.selectionEnd=e}}avalon.directive("effect",{priority:5,init:function(dW){var dV=dW.expr,dU,ap;var e=dV.replace(aQ,function(dX){return dX.replace(/./g,"0")}).indexOf(":");if(e===-1){dU=dV;ap=true}else{dU=dV.slice(0,e);ap=dV.slice(e+1)}if(!am.test(dV)){dU=aA(dU)}else{dU=ax(dU)}dW.expr="["+dU+","+ap+"]"},update:function(e){var ap=e[0];var dW=this.element;if(dW.getAttribute("data-effect-name")===ap){return}else{dW.removeAttribute("data-effect-driver")}var dY=dW.style;var dV=cm.getComputedStyle?cm.getComputedStyle(dW):null;var dU=false;if(dV&&(b1||V)){var dX=dY[cU]||dV[cU];if(dX&&dX!=="0s"){dW.setAttribute("data-effect-driver","t");dU=true}if(!dU){dX=dY[aT]||dV[aT];if(dX&&dX!=="0s"){dW.setAttribute("data-effect-driver","a");dU=true}}}if(!dU){if(avalon.effects[ap]){dW.setAttribute("data-effect-driver","j");dU=true}}if(dU){dW.setAttribute("data-effect-name",ap)}}});avalon.effects={};avalon.effect=function(e,ap){avalon.effects[e]=ap};var b1=false;var V=false;var L;var cF;var cU=avalon.cssName("transition-duration");var aT=avalon.cssName("animation-duration");new function(){var dW={"TransitionEvent":"transitionend","WebKitTransitionEvent":"webkitTransitionEnd","OTransitionEvent":"oTransitionEnd","otransitionEvent":"otransitionEnd"};var dX;for(var dV in dW){if(cm[dV]){dX=dW[dV];break}try{var dU=document.createEvent(dV);dX=dW[dV];break}catch(dY){}}if(typeof dX==="string"){b1=true;L=dX}dW={"AnimationEvent":"animationend","WebKitAnimationEvent":"webkitAnimationEnd"};var ap;for(dV in dW){if(cm[dV]){ap=dW[dV];break}}if(typeof ap==="string"){b1=true;cF=ap}}();var n=[];function dp(dU,dV){if(!dU||dU.nodeType!==1){return null}if(dV){var ap=dV.effectName;var dW=dV.effectDriver}else{ap=dU.getAttribute("data-effect-name");dW=dU.getAttribute("data-effect-driver")}if(!ap||!dW){return null}var e=n.pop()||new a9();e.el=dU;e.driver=dW;e.useCss=dW!=="j";if(e.useCss){dV&&avalon(dU).addClass(dV.effectClass);e.cssEvent=dW==="t"?L:cF}e.name=ap;e.callbacks=avalon.effects[ap]||{};return e}function c9(dU,dV){var e=dU.getAttribute("data-effect-name");if(e){dV.effectName=e;dV.effectDriver=dU.getAttribute("data-effect-driver");var ap=+dU.getAttribute("data-effect-stagger");dV.effectLeaveStagger=+dU.getAttribute("data-effect-leave-stagger")||ap;dV.effectEnterStagger=+dU.getAttribute("data-effect-enter-stagger")||ap;dV.effectClass=dU.className||NaN}}function R(e){return e.replace(/^[\S]/g,function(ap){return ap.toUpperCase()})}var du=new cP();function a9(){}a9.prototype={contrustor:a9,enterClass:function(){return az(this,"enter")},leaveClass:function(){return az(this,"leave")},actionFun:function(e,dY,dZ){if(document.hidden){return}var dW=this;var dV=dW.el;var dU=e==="leave";e=dU?"leave":"enter";var dX=dU?"enter":"leave";aZ(dW,"abort"+R(dX));aZ(dW,"before"+R(e));if(!dU){dY(dV)}var ap=function(d0){dV.removeEventListener(dW.cssEvent,dW.cssCallback);if(dU){dY(dV);avalon(dV).removeClass(dW.cssClass)}else{if(dW.driver==="a"){avalon(dV).removeClass(dW.cssClass)}}if(d0!==true){aZ(dW,"after"+R(e));dZ&&dZ(dV)}dW.dispose()};if(dW.useCss){if(dW.cssCallback){dW.cssCallback(true)}dW.cssClass=az(dW,e);dW.cssCallback=ap;dW.update=function(){dV.addEventListener(dW.cssEvent,dW.cssCallback);if(!dU&&dW.driver==="t"){avalon(dV).removeClass(dW.cssClass)}};avalon(dV).addClass(dW.cssClass);du.render(true);du.queue.push(dW)}else{aZ(dW,e,ap)}},enter:function(e,ap){this.actionFun.apply(this,["enter"].concat(avalon.slice(arguments)))},leave:function(e,ap){this.actionFun.apply(this,["leave"].concat(avalon.slice(arguments)))},dispose:function(){this.update=this.cssCallback=null;if(n.unshift(this)>100){n.pop()}}};function az(e,dU){var ap=e.callbacks[dU+"Class"];if(typeof ap==="string"){return ap}if(typeof ap==="function"){return ap()}return e.name+"-"+dU}function aZ(dU,ap,e){var dV=dU.callbacks[ap];if(dV){dV.call(dU,dU.el,e)}}var av=function(dV,ap){var e=Z.call(arguments,0);if(typeof e[2]!=="function"){e.splice(2,0,l)}if(typeof e[3]!=="function"){e.splice(3,0,l)}var dX=e[2];var dY=e[3];var dW=e[4];var dU=dp(dV,dW);if(!dU){dX();dY();return false}else{var dZ=ap?"enter":"leave";dU[dZ](dX,dY)}};avalon.mix(avalon.effect,{apply:av,append:function(ap,e,dV,dU){return av(ap,1,function(){e.appendChild(ap)},dV,dU)},before:function(e,dU,dV,ap){return av(e,1,function(){dU.parentNode.insertBefore(e,dU)},dV,ap)},remove:function(ap,e,dV,dU){return av(ap,0,function(){if(ap.parentNode===e){e.removeChild(ap)}},dV,dU)}});avalon.directive("html",{update:function(ap){var dY=this;var dW=this.element;var d0=dW.nodeType!==1;var d1=d0?dW.parentNode:dW;if(!d1){return}ap=ap==null?"":ap;if(dW.nodeType===3){var dU=bW("html");d1.insertBefore(cY.createComment(dU),dW);dY.element=cY.createComment(dU+":end");d1.replaceChild(dY.element,dW);dW=dY.element}if(typeof ap!=="object"){var dX=avalon.parseHTML(String(ap))}else{if(ap.nodeType===11){dX=ap}else{if(ap.nodeType===1||ap.item){var e=ap.nodeType===1?ap.childNodes:ap.item;
dX=cy.cloneNode(true);while(e[0]){dX.appendChild(e[0])}}}}e=avalon.slice(dX.childNodes);if(d0){var dZ=dW.nodeValue.slice(0,-4);while(true){var dV=dW.previousSibling;if(!dV||dV.nodeType===8&&dV.nodeValue===dZ){break}else{d1.removeChild(dV)}}d1.insertBefore(dX,dW)}else{avalon.clearHTML(dW).appendChild(dX)}a0(e,dY.vmodels)}});avalon.directive("if",{priority:10,update:function(dX){var d3=this;var d0=this.element;var dV=d3.stamp=+new Date();var d2;var dW=function(){if(dV!==d3.stamp){return}d3.recoverNode=null};if(d3.recoverNode){d3.recoverNode()}try{if(!d0.parentNode){return}d2=d0.parentNode}catch(d1){return}if(dX){function dZ(){if(d0.getAttribute(d3.name)){d0.removeAttribute(d3.name);cl(d0,d3.vmodels)}d3.rollback=null}if(d0.nodeType===8){var dU=d3.keep;var ap=avalon.effect.apply(dU,1,function(){if(dV!==d3.stamp){return}d0.parentNode.replaceChild(dU,d0);d0=d3.element=dU;if(dU.getAttribute("_required")){d0.required=true;d0.removeAttribute("_required")}if(d0.querySelectorAll){avalon.each(d0.querySelectorAll("[_required=true]"),function(e){e.required=true;e.removeAttribute("_required")})}dZ()},dW);ap=ap===false}if(!ap){dZ()}}else{if(d0.nodeType===1){if(d0.required===true){d0.required=false;d0.setAttribute("_required","true")}try{avalon.each(d0.querySelectorAll(":required"),function(e){d0.required=false;e.setAttribute("_required","true")})}catch(d1){}var dY=d3.element=cY.createComment("ms-if"),d4=d0.nextSibling;d3.recoverNode=function(){d3.recoverNode=null;if(dY.parentNode!==d2){d2.insertBefore(dY,d4);d3.keep=d0}};avalon.effect.apply(d0,0,function(){d3.recoverNode=null;if(dV!==d3.stamp){return}d0.parentNode.replaceChild(dY,d0);d3.keep=d0;aI.appendChild(d0);d3.rollback=function(){if(d0.parentNode===aI){aI.removeChild(d0)}}},dW)}}}});var aW=/<noscript.*?>(?:[\s\S]+?)<\/noscript>/img;var bg=/<noscript.*?>([\s\S]+?)<\/noscript>/im;var aG=function(){return new (cm.XMLHttpRequest||ActiveXObject)("Microsoft.XMLHTTP")};var a5=avalon.templateCache={};function a4(dV,dX,dU){var dW=dV.templateCache&&dV.templateCache[dX];if(dW){var ap=cY.createDocumentFragment(),e;while(e=dW.firstChild){ap.appendChild(e)}return ap}return avalon.parseHTML(dU)}function ad(ap){var dV=cY.createDocumentFragment();for(var dU=0,e=ap.length;dU<e;dU++){dV.appendChild(ap[dU])}return dV}avalon.directive("include",{init:G.attr.init,update:function(ea){var dY=this;var d4=this.element;var d2=dY.vmodels;var d7=dY.includeRendered;var d3=dY.effectName&&dY.effectClass;var dU=dY.templateCache;var e=dY.includeReplace;var d0=dY.includeLoaded;var d6=e?d4.parentNode:d4;var dX=dY._element;dY.recoverNodes=dY.recoverNodes||avalon.noop;var d5=function(em){var ed=dY._stamp=+(new Date());if(d0){var eg=d0.apply(d6,[em].concat(d2));if(typeof eg==="string"){em=eg}}if(d7){d(d6,function(){d7.call(d6)},NaN)}var eh=dY.includeLastID||"_default";dY.includeLastID=ea;var ej=dU&&dU[eh]||cY.createElement(d4.tagName||dY._element.tagName);if(d3){ej.className=d3;d6.insertBefore(ej,dY.start)}(dU||{})[eh]=ej;var el=dY.recoverNodes();if(el){d6.insertBefore(el,dY.end)}while(true){var ee=dY.start.nextSibling;if(ee&&ee!==ej&&ee!==dY.end){ej.appendChild(ee)}else{break}}avalon.effect.remove(ej,d6,function(){if(dU){if(ed===dY._stamp){aI.appendChild(ej)}}},dY);var ef=d6,ek=avalon.noop,ec=avalon.noop;var ei=a4(dY,ea,em);var eb=avalon.slice(ei.childNodes);if(e&&d3){ef=dX;ef.innerHTML="";ef.setAttribute("ms-skip","true");d6.insertBefore(ef,dY.end.nextSibling);ek=function(){ef.insertBefore(ei,null)};ec=function(){dY.recoverNodes=avalon.noop;if(ed===dY._stamp){ei=ad(eb);d6.insertBefore(ei,dY.end);a0(eb,d2)}if(ef.parentNode===d6){d6.removeChild(ef)}};dY.recoverNodes=function(){dY.recoverNodes=avalon.noop;return ad(eb)}}else{ek=function(){d6.insertBefore(ei,dY.end);a0(eb,d2)}}avalon.effect.apply(ef,"enter",ek,ec)};if(dY.param==="src"){if(typeof a5[ea]==="string"){avalon.nextTick(function(){d5(a5[ea])})}else{if(Array.isArray(a5[ea])){a5[ea].push(d5)}else{var dW=aG();dW.onreadystatechange=function(){if(dW.readyState===4){var ec=dW.status;if(ec>=200&&ec<300||ec===304||ec===1223){var ee=dW.responseText;for(var ed=0,eb;eb=a5[ea][ed++];){eb(ee)}a5[ea]=ee}else{cM("ms-include load ["+ea+"] error")}}};a5[ea]=[d5];dW.open("GET",ea,true);if("withCredentials" in dW){dW.withCredentials=true}dW.setRequestHeader("X-Requested-With","XMLHttpRequest");dW.send(null)}}}else{var ap=ea&&ea.nodeType===1?ea:cY.getElementById(ea);if(ap){if(ap.tagName==="NOSCRIPT"&&!(ap.innerHTML||ap.fixIE78)){dW=aG();dW.open("GET",location,false);dW.send(null);var d8=cY.getElementsByTagName("noscript");var dV=(dW.responseText||"").match(aW)||[];var dZ=dV.length;for(var d1=0;d1<dZ;d1++){var d9=d8[d1];if(d9){d9.style.display="none";d9.fixIE78=(dV[d1].match(bg)||["","&nbsp;"])[1]}}}avalon.nextTick(function(){d5(ap.fixIE78||ap.value||ap.innerText||ap.innerHTML)})}}}});var bU=/\(([^)]*)\)/;var F=avalon.directive("on",{priority:3000,init:function(dV){var dU=dV.expr;dV.type="on";var ap=dV.param.replace(/-\d+$/,"");if(typeof F[ap+"Hook"]==="function"){F[ap+"Hook"](dV)
}if(dU.indexOf("(")>0&&dU.indexOf(")")>-1){var e=(dU.match(bU)||["",""])[1].trim();if(e===""||e==="$event"){dU=dU.replace(bU,"")}}dV.expr=dU},update:function(dW){var dV=this;var dU=this.element;dW=function(dY){var dX=dV.getter||l;return dX.apply(this,dV.args.concat(dY))};var e=dV.param.replace(/-\d+$/,"");if(e==="scan"){dW.call(dU,{type:e})}else{if(typeof dV.specialBind==="function"){dV.specialBind(dU,dW)}else{var ap=avalon.bind(dU,e,dW)}}dV.rollback=function(){if(typeof dV.specialUnbind==="function"){dV.specialUnbind()}else{avalon.unbind(dU,e,ap)}}}});avalon.directive("repeat",{priority:90,init:function(dY){var dZ=dY.type;dY.cache={};dY.enterCount=0;var dW=dY.element;if(dW.nodeType===1){dW.removeAttribute(dY.name);c9(dW,dY);dY.param=dY.param||"el";dY.sortedCallback=a2(dW,"data-with-sorted",dY.vmodels);var dV=a2(dW,"data-"+dZ+"-rendered",dY.vmodels);var dU=bW(dZ);var ap=cY.createComment(dU+":start");var dX=dY.element=cY.createComment(dU+":end");dY.signature=dU;dY.start=ap;dY.template=cy.cloneNode(false);if(dZ==="repeat"){var d0=dW.parentNode;d0.replaceChild(dX,dW);d0.insertBefore(ap,dX);dY.template.appendChild(dW)}else{while(dW.firstChild){dY.template.appendChild(dW.firstChild)}dW.appendChild(ap);dW.appendChild(dX);d0=dW}dY.element=dX;if(dV){var e=avalon.bind(d0,"datasetchanged",function(){dV.apply(d0,d0.args);avalon.unbind(d0,"datasetchanged",e);d0.msRendered=dV})}}},update:function(ec,d4){var d9=this;var dX=this.xtype;this.enterCount+=1;var ef=!d4;if(ef){d9.$outer={};var d1="$key";var d0="$val";if(dX==="array"){d1="$first";d0="$last"}for(var eg=0,d2;d2=d9.vmodels[eg++];){if(d2.hasOwnProperty(d1)&&d2.hasOwnProperty(d0)){d9.$outer=d2;break}}}var d7=this.track;if(d9.sortedCallback){var e=d9.sortedCallback.call(dZ,d7);if(e&&Array.isArray(e)){d7=e}}var ed="move";d9.$repeat=ec;var ej=[];var ei=ef&&cy.cloneNode(false);var dV=[];var dY=this.param;var ea=avalon.mix({},this.cache);var eh=this.element;var dW=d7.length;var dZ=eh.parentNode;for(eg=0;eg<dW;eg++){var d8=d7[eg];var ee=ea[d8];if(!ee){ee=bD(this);ee.$up=null;if(dX==="array"){ed="add";ee.$id=d8;var d3=ec[eg];ee[dY]=d3;if(Object(d3)===d3){d3.$ups=d3.$ups||{};d3.$ups[dY]=ee}}else{ed="append";ee.$key=d8;ee.$val=ec[d8]}this.cache[d8]=ee;var eb=ee.$anchor||(ee.$anchor=eh.cloneNode(false));eb.nodeValue=this.signature;bp(d9,ei,ee,ej,ef&&!d9.effectDriver);bC(ee,d9,dX)}else{ej.push({});ea[d8]=true}if(this.enterCount===1){ee.$active=false;ee.$oldIndex=ee.$index;ee.$active=true;ee.$index=eg}if(dX==="array"){ee.$first=eg===0;ee.$last=eg===dW-1}else{ee.$val=cZ(ec[d8])}dV.push(ee)}this.proxies=dV;if(ef&&!d9.effectDriver){dZ.insertBefore(ei,eh);ej.forEach(function(ek){a0(ek.nodes||[],ek.vmodels);ek.nodes=ek.vmodels=null})}else{var ap=d9.staggerIndex=0;for(d8 in ea){if(ea[d8]!==true){ed="del";cz(ea[d8].$anchor,d9);c(this.cache,d8,dY);ea[d8]=null}}for(eg=0;eg<dW;eg++){ee=dV[eg];d8=dX==="array"?ee.$id:ee.$key;var d6=dV[eg-1];var dU=d6?d6.$anchor:d9.start;if(!ea[d8]){(function(em,en){var ek=em.nodes;var el=em.vmodels;if(ek){ap=a6(d9.effectEnterStagger,function(){dZ.insertBefore(em.content,en.nextSibling);a0(ek,el);cw(ek,1,d9)},ap)}em.nodes=em.vmodels=null})(ej[eg],dU)}else{if(ee.$index!==ee.$oldIndex){(function(ek,el){ap=a6(d9.effectEnterStagger,function(){var en=cz(ek.$anchor);var em=avalon.slice(en.childNodes);dZ.insertBefore(en,el.nextSibling);cw(em,1,d9)},ap)})(ee,dU)}}}}if(!ec.$track){for(d8 in this.cache){c(this.cache,d8,dY)}}(function(ek){dZ.args=ek;if(dZ.msRendered){dZ.msRendered.apply(dZ,ek)}})(aC.newWatch?arguments:[ed]);var d5=setTimeout(function(){clearTimeout(d5);avalon.fireDom(dZ,"datasetchanged",{bubble:dZ.msHasEvent})});this.enterCount-=1}});"with,each".replace(b9,function(e){G[e]=avalon.mix({},G.repeat,{priority:1400})});function cw(ap,e,dW){for(var dU=0,dV;dV=ap[dU++];){if(dV.className===dW.effectClass){avalon.effect.apply(dV,e,l,l,dW)}}}function a6(e,dU,ap){if(e){setTimeout(dU,(++ap)*e)}else{dU()}return ap}function cz(ap,dZ){var dY=cy.cloneNode(false);var d0=ap;var dV=d0.nodeValue;var dX=dZ&&Math.max(+dZ.staggerIndex,0);var e=avalon.slice(d0.parentNode.childNodes);var dW=e.indexOf(d0);while(true){var dU=e[--dW];if(!dU||String(dU.nodeValue).indexOf(dV)===0){break}if(dZ&&(dU.className===dZ.effectClass)){ap=dU;(function(d1){dZ.staggerIndex=a6(dZ.effectLeaveStagger,function(){avalon.effect.apply(d1,0,l,function(){dY.appendChild(d1)},dZ)},dX)})(dU)}else{dY.insertBefore(dU,dY.firstChild)}}dY.appendChild(d0);return dY}function bp(dU,ap,dY,dZ,d0){var dW=dU.template.cloneNode(true);var e=avalon.slice(dW.childNodes);dW.appendChild(dY.$anchor);d0&&ap.appendChild(dW);var dX=[dY].concat(dU.vmodels);var dV={nodes:e,vmodels:dX,content:dW};dZ.push(dV)}function bD(dV){var ap=dV.xtype==="object"?bO:b8;var e=ap(dV);var dU=e.$anchor||(e.$anchor=dV.element.cloneNode(false));dU.nodeValue=dV.signature;e.$outer=dV.$outer;return e}var aV=[];function b8(dW,ap){var dV=dW.param||"el";for(var e=0,dX=aV.length;e<dX;e++){var dU=aV[e];if(dU&&dU.hasOwnProperty(dV)){aV.splice(e,1);ap=dU;break
}}if(!ap){ap=ct(dV)}return ap}function ct(dV){var dU={$outer:{},$index:0,$oldIndex:0,$anchor:null,$first:false,$last:false,$remove:avalon.noop};dU[dV]=NaN;var ap={$last:1,$first:1,$index:1};ap[dV]=1;var e=cG(dU,{force:ap});e.$id=bW("$proxy$each");return e}function bC(e,dW,dU){if(dU==="array"){e.$remove=function(){dW.$repeat.removeAt(e.$index)};var dV=dW.param;e.$watch(dV,function(dX){var dY=e.$index;dW.$repeat[dY]=dX})}else{e.$watch("$val",function ap(dX){dW.$repeat[e.$key]=dX})}}var aF=[];function bO(){return aF.pop()||be()}function be(){var e=cG({$key:"",$val:NaN,$index:0,$oldIndex:0,$outer:{},$anchor:null},{force:{$key:1,$val:1,$index:1}});e.$id=bW("$proxy$with");return e}function c(dU,dX,dY){var dW=dU[dX];if(dW){var e=dW.$id.indexOf("$proxy$each")===0?aV:aF;dW.$outer={};for(var dV in dW.$events){var ap=dW.$events[dV];if(Array.isArray(ap)){ap.length=0;if(dV===dY){dW[dY]=NaN}else{if(dV==="$val"){dW.$val=NaN}}}}if(e.unshift(dW)>aC.maxRepeatSize){e.pop()}delete dU[dX]}}avalon.directive("text",{update:function(dU){var ap=this.element;dU=dU==null?"":dU;if(ap.nodeType===3){try{ap.data=dU}catch(dV){}}else{if("textContent" in ap){ap.textContent=dU}else{ap.innerText=dU}}}});function aK(dV,dU){var e="_"+dV;if(!aK[e]){var ap=cY.createElement(dV);dt.appendChild(ap);if(aX){dU=getComputedStyle(ap,null).display}else{dU=ap.currentStyle.display}dt.removeChild(ap);aK[e]=dU}return aK[e]}avalon.parseDisplay=aK;avalon.directive("visible",{init:function(e){c9(e.element,e)},update:function(dW){var dV=this,dU=this.element,ap;var e=!this.effectName;if(!this.stamp){ap=this.stamp=+new Date;if(dW){dU.style.display=dV.display||"";if(avalon(dU).css("display")==="none"){dU.style.display=dV.display=aK(dU.nodeName)}}else{dU.style.display="none"}return}ap=this.stamp=+new Date;if(dW){avalon.effect.apply(dU,1,function(){if(ap!==dV.stamp){return}var dX=dU.getAttribute("data-effect-driver")||"a";if(e){dU.style.display=dV.display||""}if(dX==="a"||dX==="t"){if(avalon(dU).css("display")==="none"){dU.style.display=dV.display||aK(dU.nodeName)}}})}else{avalon.effect.apply(dU,0,function(){if(ap!==dV.stamp){return}dU.style.display="none"})}}});var B=/<script[^>]*>([\S\s]*?)<\/script\s*>/gim;var cj=/\s+(on[^=\s]+)(?:=("[^"]*"|'[^']*'|[^\s>]+))?/g;var a1=/<\w+\b(?:(["'])[^"]*?(\1)|[^>])*>/ig;var di={a:/\b(href)\=("javascript[^"]*"|'javascript[^']*')/ig,img:/\b(src)\=("javascript[^"]*"|'javascript[^']*')/ig,form:/\b(action)\=("javascript[^"]*"|'javascript[^']*')/ig};var cK=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;var bn=/([^\#-~| |!])/g;function o(dW,dU,dZ,dY){dW=(dW+"").replace(/[^0-9+\-Ee.]/g,"");var ap=!isFinite(+dW)?0:+dW,e=!isFinite(+dU)?3:Math.abs(dU),d1=dY||",",dV=dZ||".",d0="",dX=function(d4,d3){var d2=Math.pow(10,d3);return""+(Math.round(d4*d2)/d2).toFixed(d3)};d0=(e?dX(ap,e):""+Math.round(ap)).split(".");if(d0[0].length>3){d0[0]=d0[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,d1)}if((d0[1]||"").length<e){d0[1]=d0[1]||"";d0[1]+=new Array(e-d0[1].length+1).join("0")}return d0.join(dV)}var bt=avalon.filters={uppercase:function(e){return e.toUpperCase()},lowercase:function(e){return e.toLowerCase()},truncate:function(dU,ap,e){ap=ap||30;e=typeof e==="string"?e:"...";return dU.length>ap?dU.slice(0,ap-e.length)+e:String(dU)},$filter:function(dV){for(var ap=1,dX=arguments.length;ap<dX;ap++){var dW=arguments[ap];var dU=avalon.filters[dW[0]];if(typeof dU==="function"){var e=[dV].concat(dW.slice(1));dV=dU.apply(null,e)}}return dV},camelize:m,sanitize:function(e){return e.replace(B,"").replace(a1,function(dU,ap){var dV=dU.toLowerCase().match(/<(\w+)\s/);if(dV){var dW=di[dV[1]];if(dW){dU=dU.replace(dW,function(dZ,dY,d0){var dX=d0.charAt(0);return dY+"="+dX+"javascript:void(0)"+dX})}}return dU.replace(cj," ").replace(/\s+/g," ")})},escape:function(e){return String(e).replace(/&/g,"&amp;").replace(cK,function(dV){var dU=dV.charCodeAt(0);var ap=dV.charCodeAt(1);return"&#"+(((dU-55296)*1024)+(ap-56320)+65536)+";"}).replace(bn,function(ap){return"&#"+ap.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")},currency:function(e,ap,dU){return(ap||"\uFFE5")+o(e,isFinite(dU)?dU:2)},number:o};new function(){function dV(d2){return parseInt(d2,10)||0}function dW(d3,d4,d2){var d5="";if(d3<0){d5="-";d3=-d3}d3=""+d3;while(d3.length<d4){d3="0"+d3}if(d2){d3=d3.substr(d3.length-d4)}return d5+d3}function dZ(d3,d4,d5,d2){return function(d6){var d7=d6["get"+d3]();if(d5>0||d7>-d5){d7+=d5}if(d7===0&&d5===-12){d7=12}return dW(d7,d4,d2)}}function ap(d3,d2){return function(d6,d4){var d7=d6["get"+d3]();var d5=(d2?("SHORT"+d3):d3).toUpperCase();return d4[d5][d7]}}function d1(d3){var d2=-1*d3.getTimezoneOffset();var d4=(d2>=0)?"+":"";d4+=dW(Math[d2>0?"floor":"ceil"](d2/60),2)+dW(Math.abs(d2%60),2);return d4}function dY(d3,d2){return d3.getHours()<12?d2.AMPMS[0]:d2.AMPMS[1]}var dX={yyyy:dZ("FullYear",4),yy:dZ("FullYear",2,0,true),y:dZ("FullYear",1),MMMM:ap("Month"),MMM:ap("Month",true),MM:dZ("Month",2,1),M:dZ("Month",1,1),dd:dZ("Date",2),d:dZ("Date",1),HH:dZ("Hours",2),H:dZ("Hours",1),hh:dZ("Hours",2,-12),h:dZ("Hours",1,-12),mm:dZ("Minutes",2),m:dZ("Minutes",1),ss:dZ("Seconds",2),s:dZ("Seconds",1),sss:dZ("Milliseconds",3),EEEE:ap("Day"),EEE:ap("Day",true),a:dY,Z:d1};
var e=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/;var dU=/^\/Date\((\d+)\)\/$/;bt.date=function(d3,eb){var ef=bt.date.locate,ed="",d5=[],ea,d6;eb=eb||"mediumDate";eb=ef[eb]||eb;if(typeof d3==="string"){if(/^\d+$/.test(d3)){d3=dV(d3)}else{if(dU.test(d3)){d3=+RegExp.$1}else{var d4=d3.trim();var d2=[0,0,0,0,0,0,0];var ee=new Date(0);d4=d4.replace(/^(\d+)\D(\d+)\D(\d+)/,function(ei,eh,eg,ek){var ej=ek.length===4?[ek,eh,eg]:[eh,eg,ek];d2[0]=dV(ej[0]);d2[1]=dV(ej[1])-1;d2[2]=dV(ej[2]);return""});var d8=ee.setFullYear;var ec=ee.setHours;d4=d4.replace(/[T\s](\d+):(\d+):?(\d+)?\.?(\d)?/,function(ei,eh,eg,ek,ej){d2[3]=dV(eh);d2[4]=dV(eg);d2[5]=dV(ek);if(ej){d2[6]=Math.round(parseFloat("0."+ej)*1000)}return""});var d9=0;var d7=0;d4=d4.replace(/Z|([+-])(\d\d):?(\d\d)/,function(ei,eg,ej,eh){d8=ee.setUTCFullYear;ec=ee.setUTCHours;if(eg){d9=dV(eg+ej);d7=dV(eg+eh)}return""});d2[3]-=d9;d2[4]-=d7;d8.apply(ee,d2.slice(0,3));ec.apply(ee,d2.slice(3));d3=ee}}}if(typeof d3==="number"){d3=new Date(d3)}if(avalon.type(d3)!=="date"){return}while(eb){d6=e.exec(eb);if(d6){d5=d5.concat(d6.slice(1));eb=d5.pop()}else{d5.push(eb);eb=null}}d5.forEach(function(eg){ea=dX[eg];ed+=ea?ea(d3,ef):eg.replace(/(^'|'$)/g,"").replace(/''/g,"'")});return ed};var d0={AMPMS:{0:"上午",1:"下午"},DAY:{0:"星期日",1:"星期一",2:"星期二",3:"星期三",4:"星期四",5:"星期五",6:"星期六"},MONTH:{0:"1月",1:"2月",2:"3月",3:"4月",4:"5月",5:"6月",6:"7月",7:"8月",8:"9月",9:"10月",10:"11月",11:"12月"},SHORTDAY:{"0":"周日","1":"周一","2":"周二","3":"周三","4":"周四","5":"周五","6":"周六"},fullDate:"y年M月d日EEEE",longDate:"y年M月d日",medium:"yyyy-M-d H:mm:ss",mediumDate:"yyyy-M-d",mediumTime:"H:mm:ss","short":"yy-M-d ah:mm",shortDate:"yy-M-d",shortTime:"ah:mm"};d0.SHORTMONTH=d0.MONTH;bt.date.locate=d0};var dc=avalon.modules={"domReady!":{exports:avalon,state:3},"avalon":{exports:avalon,state:4}};dc.exports=dc.avalon;var au=cm.require;var an=cm.define;var p;dP.loader=function(ap){var e=p&&ap;cm.require=e?p:au;cm.define=e?p.define:an};new function(){var er=[];var d2=[];var es=/\.js$/i;var en=/(\?[^#]*)$/;function d0(ev,eu){var ew="js";ev=ev.replace(/^(\w+)\!/,function(eC,eB){ew=eB;return""});if(ew==="ready"){cM("debug: ready!已经被废弃，请使用domReady!");ew="domReady"}var ez="";ev=ev.replace(en,function(eB){ez=eB;return""});var eA="."+ew;var ex=/js|css/.test(eA)?eA:"";ev=ev.replace(/\.[a-z0-9]+$/g,function(eB){if(eB===eA){ex=eB;return""}else{return eB}});var ey=avalon.mix({query:ez,ext:ex,res:ew,name:ev,toUrl:ek},eu);ey.toUrl(ev);return ey}function ep(ez){var ev=ez.name;var ex=ez.res;var ew=dc[ev];var eu=ev&&ez.urlNoQuery;if(ew&&ew.state>=1){return ev}ew=dc[eu];if(ew&&ew.state>=3){p(ew.deps||[],ew.factory,eu);return eu}if(ev&&!ew){ew=dc[eu]={id:eu,state:1};var ey=function(eA){dY[ex]=eA;eA.load(ev,ez,function(eB){if(arguments.length&&eB!==void 0){ew.exports=eB}ew.state=4;eq()})};if(!dY[ex]){p([ex],ey)}else{ey(dY[ex])}}return ev?eu:ex+"!"}var eb=[];var eh=false;p=avalon.require=function(eA,ey,eu,eD){if(!eh){eb.push(avalon.slice(arguments));if(arguments.length<=2){eh=true;var ez=eb.splice(0,eb.length),eB;while(eB=ez.shift()){p.apply(null,eB)}}return}if(!Array.isArray(eA)){avalon.error("require方法的第一个参数应为数组 "+eA)}var eE=[];var eF={};var ew=eu||"callback"+setTimeout("1");eD=eD||{};eD.baseUrl=aC.baseUrl;var ev=!!eD.built;if(eu){eD.parentUrl=eu.substr(0,eu.lastIndexOf("/"));eD.mapUrl=eu.replace(es,"")}if(ev){var eC=d0(eD.defineName,eD);ew=eC.urlNoQuery}else{eA.forEach(function(eH){var eI=d0(eH,eD);var eG=ep(eI);if(eG){if(!eF[eG]){eE.push(eG);eF[eG]="司徒正美"}}})}var ex=dc[ew];if(!ex||ex.state!==4){dc[ew]={id:ew,deps:ev?eA.concat():eE,factory:ey||l,state:3}}if(!ex){er.push(ew)}eq()};p.define=function(ey,eA,eu){if(typeof ey!=="string"){eu=eA;eA=ey;ey="anonymous"}if(!Array.isArray(eA)){eu=eA;eA=[]}var ex={built:!eh,defineName:ey};var ew=[eA,eu,ex];eu.require=function(eB){ew.splice(2,0,eB);if(dc[eB]){dc[eB].state=3;var eC=false;try{eC=eo(dc[eB].deps,eB)}catch(eD){}if(eC){avalon.error(eB+"模块与之前的模块存在循环依赖，请不要直接用script标签引入"+eB+"模块")}}delete eu.require;p.apply(null,ew)};var ev=ex.built?"unknown":ea();if(ev){var ez=dc[ev];if(ez){ez.state=2}eu.require(ev)}else{d2.push(eu)}};p.config=aC;p.define.amd=dc;var dW=aC["orig.paths"]={};var dX=aC["orig.map"]={};var d8=aC["packages"]=[];var dZ=aC["orig.args"]={};avalon.mix(dP,{paths:function(eu){avalon.mix(dW,eu);aC.paths=dV(dW)},map:function(ev){avalon.mix(dX,ev);var eu=dV(dX,1,1);avalon.each(eu,function(ew,ex){ex.val=dV(ex.val)});aC.map=eu},packages:function(eA){eA=eA.concat(d8);var ez={};var ex=[];for(var ey=0,ew;ew=eA[ey++];){ew=typeof ew==="string"?{name:ew}:ew;var ev=ew.name;if(!ez[ev]){var eu=d6(ew.location||ev,ew.main||"main");eu=eu.replace(es,"");ex.push(ew);ez[ev]=ew.location=eu;ew.reg=dU(ev)}}aC.packages=ex.sort()},urlArgs:function(eu){if(typeof eu==="string"){eu={"*":eu}}avalon.mix(dZ,eu);aC.urlArgs=dV(dZ,1)},baseUrl:function(eu){if(!d1(eu)){var ev=b.getElementsByTagName("base")[0];if(ev){b.removeChild(ev)}var ew=cY.createElement("a");ew.href=eu;eu=el(ew,"href");if(ev){b.insertBefore(ev,b.firstChild)
}}if(eu.length>3){aC.baseUrl=eu}},shim:function(ew){for(var eu in ew){var ev=ew[eu];if(Array.isArray(ev)){ev=ew[eu]={deps:ev}}if(!ev.exportsFn&&(ev.exports||ev.init)){ev.exportsFn=et(ev)}}aC.shim=ew}});function eo(ew,eu){for(var ev=0,ex;ex=ew[ev++];){if(dc[ex].state!==4&&(ex===eu||eo(dc[ex].deps,eu))){return true}}}function ed(ev,eu,ew){var ex=eg(ev.src);ev.onload=ev.onreadystatechange=ev.onerror=null;if(eu||(ew&&dc[ex]&&!dc[ex].state)){setTimeout(function(){b.removeChild(ev);ev=null});cM("debug: 加载 "+ex+" 失败"+eu+" "+(!dc[ex].state))}else{return true}}function eq(){loop:for(var ew=er.length,ez;ez=er[--ew];){var ex=dc[ez],ey=ex.deps;if(!ey){continue}for(var eu=0,ev;ev=ey[eu];eu++){if(Object(dc[ev]).state!==4){continue loop}}if(ex.state!==4){er.splice(ew,1);d3(ex.id,ex.deps,ex.factory);eq()}}}var ef=/complete|loaded/;function ei(eu,eA,ez){var ev=cY.createElement("script");var ex="onload" in ev;var ey=ex?"onload":"onreadystatechange";function ew(){var eB=d2.pop();eB&&eB.require(eA);if(ez){ez()}if(ed(ev,false,!ex)){cM("debug: 已成功加载 "+eu);eA&&er.push(eA);eq()}}ev[ey]=ex?ew:function(){if(ef.test(ev.readyState)){ew()}};ev.onerror=function(){ed(ev,true)};ev.className=c8;ev.src=eu;b.insertBefore(ev,b.firstChild);cM("debug: 正准备加载 "+eu)}var dY=p.plugins={domReady:{load:l},js:{load:function(ev,ex,ew){var eu=ex.url;var ez=ex.urlNoQuery;var ey=aC.shim[ev.replace(es,"")];if(ey){p(ey.deps||[],function(){var eA=avalon.slice(arguments);ei(eu,ez,function(){ew(ey.exportsFn?ey.exportsFn.apply(0,eA):void 0)})})}else{ei(eu,ez)}}},css:{load:function(ev,ey,ew){var eu=ey.url;var ex=cY.createElement("link");ex.rel="stylesheet";ex.href=eu;b.insertBefore(ex,b.firstChild);cM("debug: 已成功加载 "+eu);ew()}},text:{load:function(ev,ey,ex){var eu=ey.url;var eA=aG();eA.onreadystatechange=function(){if(eA.readyState===4){var eB=eA.status;if(eB>399&&eB<600){avalon.error(eu+" 对应资源不存在或没有开启 CORS")}else{cM("debug: 已成功加载 "+eu);ex(eA.responseText)}}};var ez="_="+(new Date()-0);var ew=eu.indexOf("?")===-1?eu+"?"+ez:eu+"&"+ez;eA.open("GET",ew,true);if("withCredentials" in eA){eA.withCredentials=true}eA.setRequestHeader("X-Requested-With","XMLHttpRequest");eA.send();cM("debug: 正准备加载 "+eu)}}};p.checkDeps=eq;function eg(eu){return(eu||"").replace(en,"")}function d1(eu){return/^(?:[a-z]+:)?\/\//i.test(String(eu))}function el(eu,ev){return"1"[0]?eu[ev]:eu.getAttribute(ev,4)}function ea(){var eu;try{a.b.c()}catch(ez){eu=ez.stack;if(!eu&&cm.opera){eu=(String(ez).match(/of linked script \S+/g)||[]).join(" ")}}if(eu){eu=eu.split(/[@ ]/g).pop();eu=eu[0]==="("?eu.slice(1,-1):eu.replace(/\s/,"");return eg(eu.replace(/(:\d+)?:\d+$/i,""))}var ev=b.getElementsByTagName("script");for(var ex=ev.length,ey;ey=ev[--ex];){if(ey.className===c8&&ey.readyState==="interactive"){var ew=el(ey,"src");return ey.className=eg(ew)}}}var d4=/^callback\d+$/;function d3(eu,eD,ey){var ev=Object(dc[eu]);ev.state=4;for(var ex=0,eB=[],eC;eC=eD[ex++];){if(eC==="exports"){var ew=ev.exports||(ev.exports={});eB.push(ew)}else{eB.push(dc[eC].exports)}}try{var eA=ey.apply(cm,eB)}catch(ez){cM("执行["+eu+"]模块的factory抛错： ",ez)}if(eA!==void 0){ev.exports=eA}if(d4.test(eu)){delete dc[eu]}delete ev.factory;return eA}function ek(eA){if(eA.indexOf(this.res+"!")===0){eA=eA.slice(this.res.length+1)}var ex=eA;var ew=0;var ez=this.baseUrl;var ev=this.parentUrl||ez;d9(eA,aC.paths,function(eC,eB){ex=ex.replace(eB,eC);ew=1});if(!ew){d9(eA,aC.packages,function(eD,eB,eC){ex=ex.replace(eC.name,eC.location)})}if(this.mapUrl){d9(this.mapUrl,aC.map,function(eB){d9(ex,eB,function(eD,eC){ex=ex.replace(eC,eD);ev=ez})})}var ey=this.ext;if(ey&&ew&&ex.slice(-ey.length)===ey){ex=ex.slice(0,-ey.length)}if(!d1(ex)){ev=this.built||/^\w/.test(ex)?ez:ev;ex=d6(ev,ex)}var eu=ex+ey;ex=eu+this.query;eu=ex.replace(en,function(eB){this.query=eB;return""});d9(eA,aC.urlArgs,function(eB){ex+=(ex.indexOf("?")===-1?"?":"&")+eB});this.url=ex;return this.urlNoQuery=eu}function dV(ex,eu,ew){var ev=ap(ex,eu,ew);ev.sort(em);return ev}function dU(eu){return new RegExp("^"+eu+"(/|$)")}function et(eu){return function(){var ev;if(eu.init){ev=eu.init.apply(cm,arguments)}return ev||(eu.exports&&ej(eu.exports))}}function ap(ey,eu,ev){var ez=[];for(var ew in ey){if(cs.call(ey,ew)){var ex={name:ew,val:ey[ew]};ez.push(ex);ex.reg=ew==="*"&&eu?/^/:dU(ew);if(ev&&ew!=="*"){ex.reg=new RegExp("/"+ew.replace(/^\//,"")+"(/|$)")}}}return ez}function d9(ew,ey,ex){ey=ey||[];for(var eu=0,ev;ev=ey[eu++];){if(ev.reg.test(ew)){ex(ev.val,ev.name,ev);return false}}}function em(ev,eu){var ex=ev.name;var ew=eu.name;if(ew==="*"){return -1}if(ex==="*"){return 1}return ew.length-ex.length}var e=/\/\w+\/\.\./;function d6(ev,eu){if(ev.charAt(ev.length-1)!=="/"){ev+="/"}if(eu.slice(0,2)==="./"){return ev+eu.slice(2)}if(eu.slice(0,2)===".."){ev+=eu;while(e.test(ev)){ev=ev.replace(e,"")}return ev}if(eu.slice(0,1)==="/"){return ev+eu.slice(1)}return ev+eu}function ej(ev){if(!ev){return ev}var eu=cm;ev.split(".").forEach(function(ew){eu=eu[ew]});return eu}var d5=cY.scripts[cY.scripts.length-1];
var d7=d5.getAttribute("data-main");if(d7){dP.baseUrl(d7);var ec=aC.baseUrl;aC.baseUrl=ec.slice(0,ec.lastIndexOf("/")+1);ei(ec.replace(es,"")+".js")}else{var ee=eg(el(d5,"src"));aC.baseUrl=ee.slice(0,ee.lastIndexOf("/")+1)}};var aO=[],aj;var ak=function(ap){aj=true;var e=avalon.require;if(e&&e.checkDeps){dc["domReady!"].state=4;e.checkDeps()}while(ap=aO.shift()){ap(avalon)}};function bZ(){try{dt.doScroll("left");ak()}catch(ap){setTimeout(bZ)}}if(cY.readyState==="complete"){setTimeout(ak)}else{if(aX){cY.addEventListener("DOMContentLoaded",ak)}else{cY.attachEvent("onreadystatechange",function(){if(cY.readyState==="complete"){ak()}});try{var ai=cm.frameElement===null}catch(cB){}if(dt.doScroll&&ai&&cm.external){bZ()}}}avalon.bind(cm,"load",ak);avalon.ready=function(e){if(!aj){aO.push(e)}else{e(avalon)}};avalon.config({loader:true});avalon.ready(function(){avalon.scan(cY.body)});if(typeof define==="function"&&define.amd){define("avalon",[],function(){return avalon})}var aJ=cm.avalon;avalon.noConflict=function(e){if(e&&cm.avalon===avalon){cm.avalon=aJ}return avalon};if(bc===void 0){cm.avalon=avalon}return avalon}));